{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"account-utente\"\n};\nconst _hoisted_2 = {\n  class: \"personal-data\"\n};\nconst _hoisted_3 = {\n  class: \"manage-password\"\n};\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"delete-account\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n    class: \"teext\"\n  }, [_createElementVNode(\"h1\", null, \"Pagina Account Utente\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", null, \"Dati Personali\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Username:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.username), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Email:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.email), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"Numero di Telefono:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.phone), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_3, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"Gestisci Password\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.updatePassword && $options.updatePassword(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"currentPassword\",\n    class: \"form-label\"\n  }, \"Password Attuale\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"currentPassword\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.currentPassword = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.currentPassword]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"newPassword\",\n    class: \"form-label\"\n  }, \"Nuova Password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"newPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newPassword = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newPassword]])]), _cache[10] || (_cache[10] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Aggiorna Password\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"div\", _hoisted_6, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", null, \"Elimina Account\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    class: \"btn btn-danger\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.confirmDeleteAccount && $options.confirmDeleteAccount(...args))\n  }, \"Elimina Account\")])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createTextVNode","_toDisplayString","$data","username","email","phone","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","updatePassword","_hoisted_4","for","type","id","$event","currentPassword","required","_hoisted_5","newPassword","_hoisted_6","onClick","confirmDeleteAccount"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/accountUtente.vue"],"sourcesContent":["<template>\n  <div class=\"account-utente\">\n    <div class=\"teext\">\n      <h1>Pagina Account Utente</h1>\n    </div>\n    \n    <div class=\"personal-data\">\n      <h2>Dati Personali</h2>\n      <p><strong>Username:</strong> {{ username }}</p>\n      <p><strong>Email:</strong> {{ email }}</p>\n      <p><strong>Numero di Telefono:</strong> {{ phone }}</p>\n    </div>\n\n    <div class=\"manage-password\">\n      <h2>Gestisci Password</h2>\n      <form @submit.prevent=\"updatePassword\">\n        <div class=\"mb-3\">\n          <label for=\"currentPassword\" class=\"form-label\">Password Attuale</label>\n          <input type=\"password\" class=\"form-control\" id=\"currentPassword\" v-model=\"currentPassword\" required>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"newPassword\" class=\"form-label\">Nuova Password</label>\n          <input type=\"password\" class=\"form-control\" id=\"newPassword\" v-model=\"newPassword\" required>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">Aggiorna Password</button>\n      </form>\n    </div>\n\n    <div class=\"delete-account\">\n      <h2>Elimina Account</h2>\n      <button class=\"btn btn-danger\" @click=\"confirmDeleteAccount\">Elimina Account</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AccountUtente',\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      email: localStorage.getItem('email') || '', \n      phone: localStorage.getItem('phone') || '', \n      currentPassword: '',\n      newPassword: '',\n      errorMessage: '',\n      successMessage: ''\n    };\n  },\n  methods: {\n    async updatePassword() {\n  try {\n    const token = sessionStorage.getItem('token');\n    const response = await axios.put('/api/updatePassword', {\n      username: this.username,\n      currentPassword: this.currentPassword,\n      newPassword: this.newPassword\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}` \n      }\n    });\n\n    this.successMessage = response.data.message || 'Password aggiornata con successo!';\n    console.log(\"aggiornata\");\n    this.errorMessage = '';\n\n    this.currentPassword = '';\n    this.newPassword = '';\n    this.$router.push('/'); \n  } catch (error) {\n    this.errorMessage = error.response?.data?.message || 'Errore durante l\\'aggiornamento della password.';\n    console.log(\"errore\", error);\n    this.successMessage = '';\n  }\n},\n\n    \n    async deleteAccount() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.delete('/api/deleteAccount', {\n          headers: {\n           Authorization: `Bearer ${token}` \n      },\n          data: { username: this.username }\n        });\n        \n        this.successMessage = response.data.message || 'Account eliminato con successo!';\n        this.errorMessage = '';\n        \n        localStorage.clear();\n        this.$router.push('/'); \n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Errore durante l\\'eliminazione dell\\'account.';\n        console.log(\"errore\", error);\n        this.successMessage = '';\n      }\n    },\n\n    confirmDeleteAccount() {\n      if (confirm('Sei sicuro di voler eliminare il tuo account? Questa azione Ã¨ irreversibile.')) {\n        this.deleteAccount();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.account-utente {\n  text-align: center;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.personal-data,\n.manage-password,\n.delete-account {\n  margin: 20px 0;\n  padding: 15px;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n}\n\n.error {\n  color: red;\n}\n\n.success {\n  color: green;\n}\n\n.teext {\n  margin: 10px 0;\n}\n</style>\n\n\n\n\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;EAKpBA,KAAK,EAAC;AAAe;;EAOrBA,KAAK,EAAC;AAAiB;;EAGnBA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;EAQhBA,KAAK,EAAC;AAAgB;;uBA3B7BC,mBAAA,CA+BM,OA/BNC,UA+BM,G,4BA9BJC,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAO,IAChBG,mBAAA,CAA8B,YAA1B,uBAAqB,E,sBAG3BA,mBAAA,CAKM,OALNC,UAKM,G,0BAJJD,mBAAA,CAAuB,YAAnB,gBAAc,sBAClBA,mBAAA,CAAgD,Y,0BAA7CA,mBAAA,CAA0B,gBAAlB,WAAS,sBAR1BE,gBAAA,CAQmC,GAAC,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,iB,GACzCL,mBAAA,CAA0C,Y,0BAAvCA,mBAAA,CAAuB,gBAAf,QAAM,sBATvBE,gBAAA,CASgC,GAAC,GAAAC,gBAAA,CAAGC,KAAA,CAAAE,KAAK,iB,GACnCN,mBAAA,CAAuD,Y,0BAApDA,mBAAA,CAAoC,gBAA5B,qBAAmB,sBAVpCE,gBAAA,CAU6C,GAAC,GAAAC,gBAAA,CAAGC,KAAA,CAAAG,KAAK,iB,KAGlDP,mBAAA,CAaM,OAbNQ,UAaM,G,4BAZJR,mBAAA,CAA0B,YAAtB,mBAAiB,sBACrBA,mBAAA,CAUO;IAVAS,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAfnBC,cAAA,KAAAC,IAAA,KAe6BC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;MACnCZ,mBAAA,CAGM,OAHNe,UAGM,G,0BAFJf,mBAAA,CAAwE;IAAjEgB,GAAG,EAAC,iBAAiB;IAACnB,KAAK,EAAC;KAAa,kBAAgB,sB,gBAChEG,mBAAA,CAAoG;IAA7FiB,IAAI,EAAC,UAAU;IAACpB,KAAK,EAAC,cAAc;IAACqB,EAAE,EAAC,iBAAiB;IAlB1E,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAkBoFf,KAAA,CAAAgB,eAAe,GAAAD,MAAA;IAAEE,QAAQ,EAAR;iDAAjBjB,KAAA,CAAAgB,eAAe,E,KAE3FpB,mBAAA,CAGM,OAHNsB,UAGM,G,0BAFJtB,mBAAA,CAAkE;IAA3DgB,GAAG,EAAC,aAAa;IAACnB,KAAK,EAAC;KAAa,gBAAc,sB,gBAC1DG,mBAAA,CAA4F;IAArFiB,IAAI,EAAC,UAAU;IAACpB,KAAK,EAAC,cAAc;IAACqB,EAAE,EAAC,aAAa;IAtBtE,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAsBgFf,KAAA,CAAAmB,WAAW,GAAAJ,MAAA;IAAEE,QAAQ,EAAR;iDAAbjB,KAAA,CAAAmB,WAAW,E,iCAEnFvB,mBAAA,CAAwE;IAAhEiB,IAAI,EAAC,QAAQ;IAACpB,KAAK,EAAC;KAAkB,mBAAiB,qB,8BAInEG,mBAAA,CAGM,OAHNwB,UAGM,G,4BAFJxB,mBAAA,CAAwB,YAApB,iBAAe,sBACnBA,mBAAA,CAAqF;IAA7EH,KAAK,EAAC,gBAAgB;IAAE4B,OAAK,EAAAf,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAa,oBAAA,IAAAb,QAAA,CAAAa,oBAAA,IAAAd,IAAA,CAAoB;KAAE,iBAAe,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"note-editor\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"button-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h1\", null, \"Modifica Nota\", -1)), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.updateNote && $options.updateNote(...args), [\"prevent\"])),\n    class: \"note-form\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"heading\"\n  }, \"Titolo:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.note.heading = $event),\n    id: \"heading\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.note.heading]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"content\"\n  }, \"Contenuto:\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.note.content = $event),\n    id: \"content\",\n    rows: \"4\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.note.content]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"update-btn\"\n  }, \"Aggiorna Nota\", -1)), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.confirmDelete($data.note._id)),\n    class: \"delete-btn\"\n  }, \"Elimina Nota\")])], 32)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","updateNote","_hoisted_2","for","type","$event","$data","note","heading","id","required","_hoisted_3","content","rows","_hoisted_4","onClick","confirmDelete","_id"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/editNote.vue"],"sourcesContent":["<template>\n  <div class=\"note-editor\">\n    <h1>Modifica Nota</h1>\n    <form @submit.prevent=\"updateNote\" class=\"note-form\">\n      <div class=\"form-group\">\n        <label for=\"heading\">Titolo:</label>\n        <input type=\"text\" v-model=\"note.heading\" id=\"heading\" required />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"content\">Contenuto:</label>\n        <textarea v-model=\"note.content\" id=\"content\" rows=\"4\" required></textarea>\n      </div>\n      <div class=\"button-group\">\n        <button type=\"submit\" class=\"update-btn\">Aggiorna Nota</button>\n        <button type=\"button\" @click=\"confirmDelete(note._id)\" class=\"delete-btn\">Elimina Nota</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      note: {\n        heading: '',\n        content: '',\n        completed: false\n      }\n    };\n  },\n  async created() {\n    await this.fetchNote();\n  },\n  methods: {\n    async fetchNote() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const noteId = this.$route.params.id;\n        const response = await axios.get(`/api/nota/${noteId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.note = response.data;\n        console.log('Nota recuperata:', this.note); \n      } catch (error) {\n        console.error('Errore nel recupero della nota:', error);\n      }\n    },\n\n\n\n\n\n\n     async updateNote() {\n  try {\n    const token = sessionStorage.getItem('token');\n    const username = localStorage.getItem('username');\n    const noteId = this.$route.params.id;\n\n    const updatedNoteData = {\n      ...this.note,\n      username: username  \n    };\n\n    const response = await axios.put(`/api/notes/${noteId}`, updatedNoteData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    console.log('Nota aggiornata:', response.data);\n    this.$router.push('/todo');\n  } catch (error) {\n    if (error.response && error.response.status === 403) {\n      alert('Non autorizzato a modificare la nota');\n    } else {\n      console.error('Errore nell\\'aggiornamento della nota:', error);\n    }\n  }\n},\n\n\n    confirmDelete(id) {\n      if (confirm(\"Sicuro di voler eliminare questa nota?\")) {\n        this.deleteNote(id);\n      }\n    },\n    async deleteNote(id) {\n  try {\n    const token = sessionStorage.getItem('token');\n    const username = localStorage.getItem('username');\n    \n    await axios.delete(`/api/notesRIM/${id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      params: {\n        username: username \n      }\n    });\n\n    console.log('Nota eliminata');\n    this.fetchNotes();\n  } catch (error) {\n    if (error.response && error.response.status === 403) {\n      alert('Non autorizzato a eliminare la nota');\n    } else {\n      console.error(\"Errore nell'eliminazione della nota:\", error);\n    }\n  }\n}\n\n  }\n};\n</script>\n\n<style scoped>\n.note-editor {\n  max-width: 800px;\n  margin: 20px auto;\n  padding: 20px;\n  background-color: #f8f9fa; \n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\nh1 {\n  text-align: center;\n  color: #343a40;\n}\n\n.note-form {\n  display: flex;\n  flex-direction: column;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  font-weight: bold;\n  margin-bottom: 5px;\n  display: inline-block;\n}\n\ninput[type=\"text\"],\ntextarea {\n  width: 100%;\n  border: 1px solid #ced4da;\n  border-radius: 4px;\n  padding: 10px;\n  font-size: 16px;\n  box-sizing: border-box;\n}\n\ntextarea {\n  resize: vertical;\n}\n\n.checkbox-group {\n  display: flex;\n  align-items: center;\n}\n\n.checkbox-group label {\n  margin-right: 10px;\n}\n\n.button-group {\n  display: flex;\n  justify-content: space-between; \n  margin-top: 20px;\n}\n\n.update-btn,\n.delete-btn {\n  background-color: #007bff;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  padding: 10px 20px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  flex: 1;\n  margin: 0 5px;\n}\n\n.delete-btn {\n  background-color: #dc3545;\n}\n\n.update-btn:hover {\n  background-color: #0056b3;\n}\n\n.delete-btn:hover {\n  background-color: #c82333;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAa;;EAGfA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAc;;uBAX7BC,mBAAA,CAgBM,OAhBNC,UAgBM,G,0BAfJC,mBAAA,CAAsB,YAAlB,eAAa,QACjBA,mBAAA,CAaO;IAbAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHjBC,cAAA,KAAAC,IAAA,KAG2BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEP,KAAK,EAAC;MACvCG,mBAAA,CAGM,OAHNO,UAGM,G,0BAFJP,mBAAA,CAAoC;IAA7BQ,GAAG,EAAC;EAAS,GAAC,SAAO,Q,gBAC5BR,mBAAA,CAAkE;IAA3DS,IAAI,EAAC,MAAM;IAN1B,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAMoCC,KAAA,CAAAC,IAAI,CAACC,OAAO,GAAAH,MAAA;IAAEI,EAAE,EAAC,SAAS;IAACC,QAAQ,EAAR;gCAA3BJ,KAAA,CAAAC,IAAI,CAACC,OAAO,E,KAE1Cb,mBAAA,CAGM,OAHNgB,UAGM,G,0BAFJhB,mBAAA,CAAuC;IAAhCQ,GAAG,EAAC;EAAS,GAAC,YAAU,Q,gBAC/BR,mBAAA,CAA2E;IAVnF,uBAAAE,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAU2BC,KAAA,CAAAC,IAAI,CAACK,OAAO,GAAAP,MAAA;IAAEI,EAAE,EAAC,SAAS;IAACI,IAAI,EAAC,GAAG;IAACH,QAAQ,EAAR;gCAApCJ,KAAA,CAAAC,IAAI,CAACK,OAAO,E,KAEjCjB,mBAAA,CAGM,OAHNmB,UAGM,G,0BAFJnB,mBAAA,CAA+D;IAAvDS,IAAI,EAAC,QAAQ;IAACZ,KAAK,EAAC;KAAa,eAAa,QACtDG,mBAAA,CAA+F;IAAvFS,IAAI,EAAC,QAAQ;IAAEW,OAAK,EAAAlB,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAAEL,QAAA,CAAAgB,aAAa,CAACV,KAAA,CAAAC,IAAI,CAACU,GAAG;IAAGzB,KAAK,EAAC;KAAa,cAAY,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
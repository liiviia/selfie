{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { createEvent } from 'ics';\nexport default {\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const events = ref([]);\n    const activities = ref([]);\n    const pomodoros = ref([]);\n    const incompleteSessions = ref([]);\n    const overdueActivities = ref([]);\n    const currentUser = localStorage.getItem('username');\n    const queryDate = computed(() => route.query.date);\n    const timeMachine = ref();\n    const unstartedSessions = ref([]);\n    const confirmDeleteActivity = id => {\n      if (confirm(\"Sicuro di voler eliminare questa Attività?\")) {\n        deleteActivities(id);\n      }\n    };\n    const navigateToAddActivity = () => {\n      router.push({\n        path: '/addActivities',\n        query: {\n          date: queryDate.value\n        }\n      });\n    };\n    const navigateToAddEvent = () => {\n      router.push({\n        path: '/addEvent',\n        query: {\n          date: queryDate.value\n        }\n      });\n    };\n    const navigateToAddPomodoro = () => {\n      router.push({\n        path: '/pomodoroTempo',\n        query: {\n          date: queryDate.value,\n          nonFare: 'false'\n        }\n      });\n    };\n    const deleteActivities = async id => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        await axios.delete(`/api/activitiesRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        console.log('Attività eliminata');\n        fetchActivities();\n        fetchOverdueActivities();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione della attività:', error);\n      }\n    };\n    const confirmDeleteEvent = id => {\n      if (confirm(\"Sicuro di voler eliminare questo Evento?\")) {\n        deleteEvents(id);\n      }\n    };\n    const rejectEvent = id => {\n      deleteEvents(id);\n    };\n    const exportToIcal = async event => {\n      const eventDate = new Date(event.date);\n      const [hour, minute] = event.startTime.split(':').map(Number);\n      const icsEvent = {\n        start: [eventDate.getFullYear(), eventDate.getMonth() + 1, eventDate.getDate(), hour, minute],\n        duration: {\n          hours: event.duration\n        },\n        title: event.title,\n        description: event.description,\n        organizer: {\n          name: event.author\n        }\n      };\n      createEvent(icsEvent, (error, value) => {\n        if (error) {\n          console.error('Errore nella creazione del file iCalendar:', error);\n          return;\n        }\n        const blob = new Blob([value], {\n          type: 'text/calendar'\n        });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${event.title || \"evento\"}.ics`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        console.log('Evento esportato con successo!');\n      });\n    };\n    const deleteEvents = async id => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        await axios.delete(`/api/eventsRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        console.log('Evento eliminato');\n        fetchEvents();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione di evento:', error);\n      }\n    };\n    const confirmDeletePomodoro = id => {\n      if (confirm(\"Sicuro di voler eliminare questa sessione Pomodoro?\")) {\n        deletePomodoro(id);\n      }\n    };\n    const deletePomodoro = async id => {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.delete(`/api/pomRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Sessione Pomodoro eliminata');\n        window.location.reload();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione della sessione:', error);\n      }\n    };\n    const iniziaPomodoro = async (id, remainingTime, date, tempoStudio, tempoPausa, ripetizioni) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.post(`/api/iniziaPomodoro/${id}`, {\n          date\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data.success) {\n          router.push({\n            path: '/pomodoroTempo',\n            query: {\n              date: date,\n              remainingTime: remainingTime,\n              isStudyPhase: true,\n              tempoStudio: tempoStudio,\n              tempoPausa: tempoPausa,\n              ripetizioni: ripetizioni,\n              nuovo: true,\n              nonFare: true\n            }\n          });\n        } else {\n          console.log(\"errore\");\n        }\n      } catch (error) {\n        console.error('Errore durante l\\'avvio del pomodoro:', error);\n      }\n    };\n    const isSameDay = (date1, date2) => {\n      const d1 = new Date(date1);\n      const d2 = new Date(date2);\n      return d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();\n    };\n    const fetchActivities = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const author = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/by-date', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            date: queryDate.value,\n            author\n          }\n        });\n        activities.value = response.data;\n      } catch (error) {\n        console.error('Errore nel recupero delle attività:', error);\n      }\n    };\n\n    /* const fetchPoms = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/poms', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { username: username }\n        });\n         const today = new Date();\n        today.setHours(0, 0, 0, 0);\n         this.poms = response.data.filter(pom => {\n          const sessionDate = new Date(pom.giorno);\n          sessionDate.setHours(0, 0, 0, 0);\n          return sessionDate >= today;\n        });\n       } catch (error) {\n        console.error('Errore durante il recupero delle sessioni Pomodoro:', error);\n      }\n    }\n    */\n\n    const fetchEvents = async () => {\n      try {\n        const author = route.query.author;\n        const date = route.query.date;\n        const username = route.query.username || author;\n        const token = sessionStorage.getItem('token');\n        const response = await axios.get('/api/events/by-date', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author,\n            date\n          }\n        });\n        events.value = Array.isArray(response.data) ? response.data : [response.data];\n        const pomodoroResponse = await axios.get('/api/poms/by-date', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username,\n            date\n          }\n        });\n        pomodoros.value = Array.isArray(pomodoroResponse.data) ? pomodoroResponse.data : [pomodoroResponse.data];\n      } catch (error) {\n        console.error('Errore nel recupero degli eventi, delle attività e dei pomodori:', error);\n      }\n    };\n    const fetchIncompleteSessions = async () => {\n      const token = sessionStorage.getItem('token');\n      const username = localStorage.getItem('username');\n      try {\n        const response = await axios.get('/api/poms/incomplete', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username\n          }\n        });\n        const query = queryDate.value;\n        const queryDateMs = query ? new Date(query).valueOf() : null;\n        incompleteSessions.value = (Array.isArray(response.data) ? response.data : [response.data]).filter(session => {\n          return session.studyCycles > 0 && session.remainingTime > 0 && session.tempoStudio && session.tempoPausa && new Date(session.giorno.valueOf()) <= queryDateMs;\n        });\n      } catch (error) {\n        console.error('Errore nel recupero delle sessioni incomplete:', error);\n      }\n    };\n    const resumePomodoro = session => {\n      const plainSession = JSON.parse(JSON.stringify(session));\n      const nuovo = false;\n      router.push({\n        path: '/pomodoroTempo',\n        query: {\n          date: new Date(plainSession.giorno).toISOString(),\n          remainingTime: plainSession.remainingTime,\n          studyCycles: plainSession.studyCycles,\n          isStudyPhase: plainSession.isStudyPhase,\n          tempoStudio: plainSession.tempoStudio,\n          tempoPausa: plainSession.tempoPausa,\n          ripetizioni: plainSession.ripetizioni,\n          nuovo: nuovo,\n          nonFare: true\n        }\n      });\n    };\n    const discardPomodoro = async session => {\n      const token = sessionStorage.getItem('token');\n      try {\n        await axios.delete(`/api/pomRemove/${session._id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        incompleteSessions.value = incompleteSessions.value.filter(s => s._id !== session._id);\n      } catch (error) {\n        console.error('Errore nello scartare la sessione pomodoro:', error.response?.data || error);\n      }\n    };\n    const formatDate = dateString => {\n      if (!dateString) return 'Data non disponibile';\n      const date = new Date(dateString);\n      return date instanceof Date && !isNaN(date) ? date.toLocaleDateString('it-IT', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      }) : 'Data non valida';\n    };\n    const fetchOverdueActivities = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/overdue', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username\n          }\n        });\n        overdueActivities.value = response.data;\n      } catch (error) {\n        console.error('Errore nel recupero delle attività scadute:', error);\n      }\n    };\n    const filteredOverdueActivities = computed(() => overdueActivities.value.filter(activity => activity.title && activity.deadline));\n    const markAsCompleted = async activity => {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.put(`/api/activities/${activity._id}`, {\n          completed: true\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        activity.completed = true;\n        // Aggiorna la lista localmente\n        activities.value = activities.value.filter(a => a._id !== activity._id);\n        overdueActivities.value = overdueActivities.value.filter(a => a._id !== activity._id);\n        window.location.reload();\n      } catch (error) {\n        console.error('Errore nel completare l\\'attività:', error);\n      }\n    };\n    const discardActivity = async id => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        await axios.delete(`/api/activitiesRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        fetchOverdueActivities();\n        fetchActivities();\n        overdueActivities.value = overdueActivities.value.filter(a => a._id !== id);\n      } catch (error) {\n        console.error('Errore nello scartare l\\'attività:', error);\n      }\n    };\n    const getTimeMachine = async () => {\n      try {\n        const response = await axios.get('/api/getTime-machine');\n        timeMachine.value = response.data;\n      } catch (error) {\n        console.log(\"errore recupero data time machine\", error);\n      }\n    };\n    const fetchUnstartedSessions = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/getSessioniNonPartite', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username\n          }\n        });\n        console.log(\"risposta getsessioniNonPartite\", response);\n        unstartedSessions.value = Array.isArray(response.data) ? response.data : [];\n      } catch (error) {\n        console.error('Errore nel recupero delle sessioni mai avviate:', error);\n        unstartedSessions.value = []; // Assegna un array vuoto in caso di errore\n      }\n    };\n    onMounted(() => {\n      //  fetchPoms();\n      fetchEvents();\n      fetchActivities();\n      fetchOverdueActivities();\n      fetchIncompleteSessions();\n      fetchUnstartedSessions();\n      setInterval(getTimeMachine, 1000);\n    });\n    return {\n      events,\n      activities,\n      pomodoros,\n      incompleteSessions,\n      overdueActivities,\n      formatDate,\n      queryDate,\n      navigateToAddEvent,\n      navigateToAddActivity,\n      navigateToAddPomodoro,\n      resumePomodoro,\n      discardPomodoro,\n      confirmDeleteActivity,\n      confirmDeleteEvent,\n      confirmDeletePomodoro,\n      //markActivityComplete ,\n      markAsCompleted,\n      filteredOverdueActivities,\n      discardActivity,\n      iniziaPomodoro,\n      timeMachine,\n      isSameDay,\n      currentUser,\n      rejectEvent,\n      exportToIcal\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","useRouter","axios","createEvent","setup","route","router","events","activities","pomodoros","incompleteSessions","overdueActivities","currentUser","localStorage","getItem","queryDate","query","date","timeMachine","unstartedSessions","confirmDeleteActivity","id","confirm","deleteActivities","navigateToAddActivity","push","path","value","navigateToAddEvent","navigateToAddPomodoro","nonFare","token","sessionStorage","username","delete","headers","Authorization","params","console","log","fetchActivities","fetchOverdueActivities","error","confirmDeleteEvent","deleteEvents","rejectEvent","exportToIcal","event","eventDate","Date","hour","minute","startTime","split","map","Number","icsEvent","start","getFullYear","getMonth","getDate","duration","hours","title","description","organizer","name","author","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","fetchEvents","confirmDeletePomodoro","deletePomodoro","window","location","reload","iniziaPomodoro","remainingTime","tempoStudio","tempoPausa","ripetizioni","response","post","data","success","isStudyPhase","nuovo","isSameDay","date1","date2","d1","d2","get","Array","isArray","pomodoroResponse","fetchIncompleteSessions","queryDateMs","valueOf","filter","session","studyCycles","giorno","resumePomodoro","plainSession","JSON","parse","stringify","toISOString","discardPomodoro","_id","s","formatDate","dateString","isNaN","toLocaleDateString","year","month","day","filteredOverdueActivities","activity","deadline","markAsCompleted","put","completed","a","discardActivity","getTimeMachine","fetchUnstartedSessions","setInterval"],"sources":["/home/livia/Scrivania/TW/progettoTWvue/frontend/src/views/eventDayCalendar.vue"],"sourcesContent":["<template>\n   <div>\n    <h2 class=\"main-title\">Eventi, Attività e Pomodori per {{ formatDate(queryDate) }}</h2>\n     <div class=\"section events-section full-width\">\n      <h3>EVENTI DI QUESTO GIORNO:</h3>\n      <div v-if=\"events.length > 0\">\n        <div v-for=\"event in events\" :key=\"event._id\" class=\"item-container\">\n  <h4><span style=\"font-size: 0.9em;\">Titolo:</span> {{ event.title }}</h4>\n  <p>Data: {{ formatDate(event.date) }}</p>\n  <p>Descrizione: {{ event.description }}</p>\n  <p>Ora di inizio: {{ event.startTime }}</p>\n  <p>Luogo: {{ event.location }}</p>\n  <p>Durata: {{ event.duration }}</p>\n  <p v-if=\"event.type === 'gruppo'\" style=\"color: #FF6347;\">\n    Evento di gruppo creato da: {{ event.author }} <br>\n    gruppo composto da: {{ event.participants.join(', ') }}\n  </p>\n\n  <button v-if=\"event.author === currentUser\" @click=\"confirmDeleteEvent(event._id)\" class=\"delete-btn-cq\" >🗑️ Elimina Evento</button>\n\n  \n\n  <button v-if=\"event.participants.includes(currentUser) && event.author !== currentUser\" \n          @click=\"rejectEvent(event._id)\" \n          class=\"delete-btn-cq\">🗑️ Rifiuta Evento</button>\n\n          <button @click=\"exportToIcal(event)\" class=\"export-btn\">📅 Esporta</button>\n</div>\n      </div>\n      <p v-else>Nessun evento per questa data.</p>\n      <div class=\"button-container\">\n        <button class=\"fixed-button\" @click=\"navigateToAddEvent\" style=\"background:#f4a460;\">\n          Aggiungi evento\n        </button>\n      </div>\n    </div>\n\n    <div class=\"content-container\">\n      <div class=\"section activities-section\">\n        <h3>ATTIVITÀ CHE SCADONO QUESTO GIORNO:</h3>\n        <div v-if=\"activities.length > 0\">\n          <div v-for=\"activity in activities\" :key=\"activity._id\" class=\"item-container\"\n          :class=\"{ completed: activity.completed }\">\n            <h4><span style=\"font-size: 0.9em;\">Titolo:</span> {{ activity.title }}</h4>\n            <p>Data: {{ formatDate(activity.deadline || activity.date) }}</p>\n            <p>Descrizione: {{ activity.description }}</p>\n            <p v-if=\"activity.type === 'gruppo'\" style=\"color: #FF6347;\">\n              Attività di gruppo creata da: {{ activity.author }}<br>\n              Gruppo composto da: {{ activity.participants.join(', ') }}\n            </p>\n            <button v-if=\"!activity.completed\" @click=\"markAsCompleted(activity)\" class=\"complete-btn\" style=\"background:#f4a460;\">Completata</button>\n            <button @click=\"confirmDeleteActivity(activity._id)\" class=\"delete-btn-cq\" >🗑️</button>\n          </div>\n        </div>\n        <p v-else>Nessuna attività per questa data.</p>\n        <div class=\"button-container\">\n          <button class=\"fixed-button\" @click=\"navigateToAddActivity\" style=\"background:#f4a460;\">\n            Aggiungi attivita\n          </button>\n        </div>\n      </div>\n      \n      \n      <div class=\"content-container\">\n       <div class=\"section overdue-activities-section\">\n        <h3>ATTIVITÀ INCOMPLETE:</h3>\n        <div v-if=\"filteredOverdueActivities.length > 0\">\n          <div v-for=\"activity in filteredOverdueActivities\" :key=\"activity._id\" class=\"item-container overdue\">\n            <h4>Titolo: {{ activity.title }}</h4>\n            <p>Data scadenza: {{ formatDate(activity.deadline) }}</p>\n            <p>Descrizione: {{ activity.description }}</p>\n            <div>\n              <div>\n  <button @click=\"discardActivity(activity._id)\" class=\"delete-btn discard-btn\">Scarta</button>\n  <button v-if=\"!activity.completed\" @click=\"markAsCompleted(activity)\" class=\"delete-btn completed-btn\">Completata</button>\n</div>\n\n           </div>\n\n          </div>\n        </div>\n        <p v-else>Nessuna attività incompleta trovata.</p>\n      </div>\n    </div>\n  </div>\n\n    \n    <div class=\"pomodoro-container\">\n  <div class=\"section pomodoros-section\">\n    <h3>POMODORI PER QUESTO GIORNO:</h3>\n    <div v-if=\"pomodoros.length > 0\">\n      <div v-for=\"pomodoro in pomodoros\" :key=\"pomodoro._id\" class=\"item-container\">\n        <h4>Pomodoro Sessione</h4>\n        <p>Data: {{ formatDate(pomodoro.giorno) }}</p>\n        <p>Tempo di studio: {{ pomodoro.tempoStudio }} minuti</p>\n        <p>Tempo di pausa: {{ pomodoro.tempoPausa }} minuti</p>\n        <p>Ripetizioni: {{ pomodoro.ripetizioni }}</p>\n        <button @click=\"confirmDeletePomodoro(pomodoro._id)\" class=\"delete-btn-cq\">🗑️</button>\n        <button\n          v-if=\"isSameDay(queryDate, timeMachine) && !pomodoro.isStarted\"\n          @click=\"iniziaPomodoro(pomodoro._id, pomodoro.remainingTime, pomodoro.giorno, pomodoro.tempoStudio, pomodoro.tempoPausa, pomodoro.ripetizioni)\"\n        >\n          Inizia il pomodoro\n        </button>\n        <p v-else-if=\"pomodoro.isStarted\">Pomodoro già avviato</p>\n      </div>\n    </div>\n    <p v-else>Nessun pomodoro per questa data.</p>\n    <div class=\"button-container\">\n      <button class=\"fixed-button\" @click=\"navigateToAddPomodoro\" style=\"background:#f4a460;\">\n        Aggiungi pomodoro\n      </button>\n    </div>\n  </div>\n\n\n  <div class=\"section pomodorosScaduti-section\">\n    <h3>POMODORI INCOMPLETI</h3>\n    <div v-if=\"incompleteSessions.length > 0\">\n      <div v-for=\"session in incompleteSessions\" :key=\"session._id\" class=\"item-container\">\n        <p>Data: {{ formatDate(session.giorno) }}</p>\n        <p>Tempo rimanente: {{ Math.floor(session.remainingTime / 60) }}:{{ session.remainingTime % 60 }}</p>\n        <p>Cicli rimanenti: {{ session.studyCycles }}</p>\n        <button @click=\"resumePomodoro(session)\" class=\"action-button\" style=\"background:#f4a460;\">Riprendi Sessione</button>\n        <button @click=\"discardPomodoro(session)\" class=\"action-button\" style=\"all: unset; cursor: pointer;\">\n          <span class=\"trash-icon\" style=\"font-size: 0.9em; color: inherit;\">🗑️</span>\n        </button>\n      </div>\n    </div>\n    <p v-else>nessun pomodoro da portare a termine</p>\n  </div>\n\n  \n  <div class=\"section unstarted-pomodoros-section\">\n    <h3>POMODORI NON AVVIATI</h3>\n    <div v-if=\"unstartedSessions && unstartedSessions.length > 0\">\n      <div v-for=\"session in unstartedSessions\" :key=\"session._id\" class=\"item-container\">\n        <h4>Sessione non avviata</h4>\n        <p>Data: {{ formatDate(session.giorno) }}</p>\n        <p>Tempo di studio: {{ session.tempoStudio }} minuti</p>\n        <p>Tempo di pausa: {{ session.tempoPausa }} minuti</p>\n        <p>Ripetizioni: {{ session.ripetizioni }}</p>\n        <button @click=\"iniziaPomodoro(session._id, session.remainingTime, session.giorno, session.tempoStudio, session.tempoPausa, session.ripetizioni)\"\n                class=\"action-button\" style=\"background:#f4a460;\">\n          Inizia Sessione\n        </button>\n      </div>\n    </div>\n    <p v-else>Nessun pomodoro non avviato trovato.</p>\n  </div>\n</div>\n\n  \n  </div> \n\n</template>\n\n\n<script>\nimport { ref, onMounted, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { createEvent } from 'ics';\n\nexport default {\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const events = ref([]);\n    const activities = ref([]);\n    const pomodoros = ref([]); \n    const incompleteSessions = ref([]);\n    const overdueActivities = ref([]); \n    const currentUser = localStorage.getItem('username') ;\n    const queryDate = computed(() => route.query.date);\n    const timeMachine = ref();\n    const unstartedSessions = ref([]);\n\n\n    const confirmDeleteActivity = (id) => {\n      if (confirm(\"Sicuro di voler eliminare questa Attività?\")) {\n        deleteActivities(id); \n      }\n    };\n    const navigateToAddActivity = () => {\n      router.push({ path: '/addActivities', query: { date: queryDate.value } });\n    };\n    const navigateToAddEvent = () => {\n      router.push({ path: '/addEvent', query: { date: queryDate.value } });\n    };\n    const navigateToAddPomodoro = () => {\n      router.push({ path: '/pomodoroTempo', query: { date: queryDate.value,nonFare: 'false' } });\n    };\n\n    const deleteActivities = async (id) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        await axios.delete(`/api/activitiesRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}` \n          },\n          params: { username: username } \n        });\n        console.log('Attività eliminata');\n        fetchActivities(); \n        fetchOverdueActivities();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione della attività:', error);\n      }\n    };\n\n    const confirmDeleteEvent = (id) => {\n      if (confirm(\"Sicuro di voler eliminare questo Evento?\")) {\n        deleteEvents(id); \n      }\n    };\n\n    const rejectEvent = (id) => {\n      deleteEvents(id);\n    }\n\n    const exportToIcal = async (event) => {\n\n      \n\n      const eventDate = new Date(event.date);\n      const [hour, minute] = event.startTime.split(':').map(Number); \n\n      \n\n      const icsEvent = {\n        start: [\n      eventDate.getFullYear(), \n      eventDate.getMonth() + 1, \n      eventDate.getDate(), \n      hour, \n      minute, \n    ],\n      duration: {hours: event.duration},\n      title: event.title,\n      description: event.description,\n      organizer: { name: event.author}, \n      };\n\n\n\n      createEvent(icsEvent, (error, value) => {\n       if (error) {\n      console.error('Errore nella creazione del file iCalendar:', error);\n      return;\n        }\n\n    const blob = new Blob([value], { type: 'text/calendar' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${event.title || \"evento\"}.ics`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    console.log('Evento esportato con successo!');\n  });\n\n\n    };\n\n    const deleteEvents = async (id) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        await axios.delete(`/api/eventsRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}` \n          },\n          params: { username: username }\n        });\n        console.log('Evento eliminato');\n        fetchEvents(); \n      } catch (error) {\n        console.error('Errore nell\\'eliminazione di evento:', error);\n      }\n    };\n\n    const confirmDeletePomodoro = (id) => {\n      if (confirm(\"Sicuro di voler eliminare questa sessione Pomodoro?\")) {\n        deletePomodoro(id); \n      }\n    };\n\n    const deletePomodoro = async (id) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.delete(`/api/pomRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}` \n          }\n        });\n        console.log('Sessione Pomodoro eliminata');\n        window.location.reload();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione della sessione:', error);\n      }\n    };\n\n    const iniziaPomodoro = async (id, remainingTime, date, tempoStudio, tempoPausa, ripetizioni) => {\n  try {\n    const token = sessionStorage.getItem('token');\n    const response = await axios.post(`/api/iniziaPomodoro/${id}`, {\n      date },\n      {\n      headers: {\n         Authorization: `Bearer ${token}` \n        }\n    });\n\n    if (response.data.success) {\n      router.push({\n        path: '/pomodoroTempo',\n        query: {\n          date: date,\n          remainingTime: remainingTime,\n          isStudyPhase: true,\n          tempoStudio: tempoStudio,\n          tempoPausa: tempoPausa,\n          ripetizioni: ripetizioni,\n          nuovo: true,\n          nonFare: true\n        }\n      });\n    } else {\n         console.log(\"errore\");\n    }\n  } catch (error) {\n    console.error('Errore durante l\\'avvio del pomodoro:', error);\n  }\n};\n\n\n\n    const isSameDay = (date1, date2) => {\n      const d1 = new Date(date1);\n        const d2 = new Date(date2);\n        return (\n            d1.getFullYear() === d2.getFullYear() &&\n            d1.getMonth() === d2.getMonth() &&\n            d1.getDate() === d2.getDate()\n        );\n\n    };\n\n\n    const fetchActivities = async () => {\n  try {\n    const token = sessionStorage.getItem('token');\n    const author = localStorage.getItem('username'); \n    const response = await axios.get('/api/activities/by-date', {\n      headers: { Authorization: `Bearer ${token}` },\n      params: { date: queryDate.value, author }, \n    });\n    activities.value = response.data;\n  } catch (error) {\n    console.error('Errore nel recupero delle attività:', error);\n  }\n};\n\n\n\n    /* const fetchPoms = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/poms', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { username: username }\n        });\n\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n\n        this.poms = response.data.filter(pom => {\n          const sessionDate = new Date(pom.giorno);\n          sessionDate.setHours(0, 0, 0, 0);\n          return sessionDate >= today;\n        });\n\n      } catch (error) {\n        console.error('Errore durante il recupero delle sessioni Pomodoro:', error);\n      }\n    }\n*/\n\n    const fetchEvents = async () => {\n      try {\n        const author = route.query.author;\n        const date = route.query.date;\n        const username = route.query.username || author;\n\n        const token = sessionStorage.getItem('token');\n\n        const response = await axios.get('/api/events/by-date', {\n          headers: { Authorization: `Bearer ${token}` },\n          params: { author, date }\n        });\n        events.value = Array.isArray(response.data) ? response.data : [response.data];\n\n\n        const pomodoroResponse = await axios.get('/api/poms/by-date', {\n          headers: { Authorization: `Bearer ${token}` },\n          params: { username, date }\n        });\n        pomodoros.value = Array.isArray(pomodoroResponse.data) ? pomodoroResponse.data : [pomodoroResponse.data];\n\n      } catch (error) {\n        console.error('Errore nel recupero degli eventi, delle attività e dei pomodori:', error);\n      }\n    };\n\n    const fetchIncompleteSessions = async () => {\n      const token = sessionStorage.getItem('token');\n      const username = localStorage.getItem('username');\n\n      try {\n        const response = await axios.get('/api/poms/incomplete', {\n          headers: { Authorization: `Bearer ${token}` },\n          params: { username }\n        });\n\n       \n\nconst query = queryDate.value; \n    const queryDateMs = query ? new Date(query).valueOf() : null;\n        \n        incompleteSessions.value = (Array.isArray(response.data) ? response.data : [response.data]).filter(session => {\n          return (\n          session.studyCycles > 0 && \n          session.remainingTime > 0 &&\n          session.tempoStudio && \n          session.tempoPausa &&\n          new Date(session.giorno.valueOf()) <= queryDateMs \n      );\n    });\n\n      } catch (error) {\n        console.error('Errore nel recupero delle sessioni incomplete:', error);\n      }\n    };\n\n    const resumePomodoro = (session) => {\n    const plainSession = JSON.parse(JSON.stringify(session));\n\n    const nuovo = false;\n\n    router.push({\n      path: '/pomodoroTempo',\n      query: {\n        date: new Date(plainSession.giorno).toISOString(),\n        remainingTime: plainSession.remainingTime,\n        studyCycles: plainSession.studyCycles,\n        isStudyPhase: plainSession.isStudyPhase,\n        tempoStudio: plainSession.tempoStudio, \n        tempoPausa: plainSession.tempoPausa,   \n        ripetizioni: plainSession.ripetizioni, \n        nuovo: nuovo,\n        nonFare:true,\n    },\n  });\n    };\n\n    const discardPomodoro = async (session) => {\n      const token = sessionStorage.getItem('token');\n      try {\n        await axios.delete(`/api/pomRemove/${session._id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n        incompleteSessions.value = incompleteSessions.value.filter(s => s._id !== session._id);\n      } catch (error) {\n        console.error('Errore nello scartare la sessione pomodoro:', error.response?.data || error);\n      }\n    };\n\n\n    const formatDate = (dateString) => {\n      if (!dateString) return 'Data non disponibile';\n      const date = new Date(dateString);\n      return date instanceof Date && !isNaN(date)\n        ? date.toLocaleDateString('it-IT', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n          })\n        : 'Data non valida';\n    };\n\n\n    const fetchOverdueActivities = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/overdue', {\n          headers: { Authorization: `Bearer ${token}` },\n          params: { username },\n        });\n        overdueActivities.value = response.data; \n      } catch (error) {\n        console.error('Errore nel recupero delle attività scadute:', error);\n      }\n    };\n\n    const filteredOverdueActivities = computed(() =>\n      overdueActivities.value.filter(activity => activity.title && activity.deadline)\n    );\n\n\n\n      const markAsCompleted = async (activity) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.put(`/api/activities/${activity._id}`, { completed: true }, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        activity.completed = true;\n        // Aggiorna la lista localmente\n        activities.value = activities.value.filter(a => a._id !== activity._id);\n        overdueActivities.value = overdueActivities.value.filter(a => a._id !== activity._id);\n        window.location.reload();\n      } catch (error) {\n        console.error('Errore nel completare l\\'attività:', error);\n      }\n    };\n\n    const discardActivity = async (id) => {\n  try {\n    const token = sessionStorage.getItem('token');\n    const username = localStorage.getItem('username');\n    await axios.delete(`/api/activitiesRemove/${id}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      params: {username: username}\n    });\n    fetchOverdueActivities();\n    fetchActivities(); \n    overdueActivities.value = overdueActivities.value.filter(a => a._id !== id);\n  } catch (error) {\n    console.error('Errore nello scartare l\\'attività:', error);\n  }\n};\n\n   const getTimeMachine = async () => {\n\n    try{\n    const response = await axios.get('/api/getTime-machine');\n    timeMachine.value = response.data\n\n    } catch (error) {\n      console.log(\"errore recupero data time machine\" , error);\n    }\n   };\n\nconst fetchUnstartedSessions = async () => {\n  try {\n    const token = sessionStorage.getItem('token');\n    const username = localStorage.getItem('username');\n    const response = await axios.get('/api/getSessioniNonPartite', {\n      headers: { Authorization: `Bearer ${token}` },\n      params: { username },\n    });\n          console.log(\"risposta getsessioniNonPartite\" , response);\n\n    unstartedSessions.value = Array.isArray(response.data) ? response.data : [];\n  } catch (error) {\n    console.error('Errore nel recupero delle sessioni mai avviate:', error);\n    unstartedSessions.value = []; // Assegna un array vuoto in caso di errore\n  }\n};\n\n\n    onMounted(() => {\n    //  fetchPoms();\n      fetchEvents();\n      fetchActivities();\n      fetchOverdueActivities();\n      fetchIncompleteSessions();\n      fetchUnstartedSessions(); \n      setInterval(getTimeMachine, 1000);    });\n\n    return {\n      events,\n      activities,\n      pomodoros, \n      incompleteSessions, \n      overdueActivities,\n      formatDate,\n      queryDate,\n      navigateToAddEvent,\n      navigateToAddActivity,\n      navigateToAddPomodoro, \n      resumePomodoro, \n      discardPomodoro,\n      confirmDeleteActivity,\n      confirmDeleteEvent,\n      confirmDeletePomodoro,\n      //markActivityComplete ,\n      markAsCompleted,\n      filteredOverdueActivities,\n      discardActivity,\n      iniziaPomodoro,\n      timeMachine,\n      isSameDay,\n      currentUser,\n      rejectEvent,\n      exportToIcal\n    };\n  }\n};\n\n\n</script>\n\n<style scoped>\n.full-width {\n  width: 100%;\n  margin-bottom: 20px;\n  background-color: rgba(230, 247, 255, 0.8);\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 25px;\n}\n\n\n.center-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.content-container {\n  display: flex;\n  justify-content: space-between;\n  gap: 40px;\n  padding: 20px;\n}\n\n.button-container {\n  margin-top: auto; \n  margin-bottom: 10px; \n}\n\nbutton {\n  margin-right: 10px;\n  padding: 8px 16px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\n.activities-section {\n  flex: 1.5; \n  background-color: #f9f9f9;\n}\n\n.events-section {\n  flex: 1.5; \n  background-color: #e6f7ff;\n}\n\n.pomodoros-section {\n  flex: 1.5; \n  background-color: #ffe6e6;\n}\n\n.section {\n  margin-right: 100px;\n  min-width: 500px;\n  flex: 1.5; \n  padding: 25px;\n  border: 1px solid #ddd; \n  border-radius: 10px; \n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); \n  background-color: rgba(255, 255, 255, 0.8); \n  display: flex; \n  flex-direction: column; \n  justify-content: space-between; \n}\n\n.section:hover {\n  transform: scale(1.02); \n}\n\n.activities-section {\n  background-color: rgba(249, 249, 249, 0.8); \n}\n\n.events-section {\n  background-color: rgba(230, 247, 255, 0.8); \n}\n\n.pomodoros-section {\n  background-color: rgba(255, 230, 230, 0.8);\n}\n\nhr {\n  border: 0; \n  height: 1px; \n  background-color: #ddd; \n  margin: 10px 0; \n}\n.item-container {\n  background-color: rgba(255, 255, 255, 0.9);\n  border: 1px solid #ddd; \n  border-radius: 8px; \n  padding: 15px; \n  margin-bottom: 15px; \n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  position: relative; \n}\n\n.delete-btn-c {\n  position: absolute; \n  bottom: 10px;\n  right: 10px; \n  background: none;\n  border: none; \n  cursor: pointer; \n  font-size: 1.2em;\n  color: #e74c3c; \n}\n.delete-btn-cq {\n  position: absolute; \n  bottom: 10px;\n  right: 10px; \n  background: none;\n  border: none; \n  cursor: pointer; \n  font-size: 1.2em;\n  color: #e74c3c; \n}\n.delete-btn-cqx {\n  background: none;\n  border: none; \n  cursor: pointer; \n  font-size: 1.2em;\n  color: #e74c3c;\n}\n.delete-btn {\n  position: absolute;\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 1.2em;\n  color: #e74c3c;\n}\n.discard-btn {\n  bottom: 10px;\n  right: 10px;\n}\n\n.completed-btn {\n  bottom: 30px;\n  right: 10px;\n}\n.export-btn {\n  position: absolute; \n  bottom: 50px;\n  right: 10px; \n  background: none;\n  border: none; \n  cursor: pointer; \n  font-size: 1.2em;\n  color: #e74c3c; \n}\n\n.delete-btn:hover {\n  color: #c0392b; \n}\n.export-btn:hover {\n  color:#c0392b; \n}\n\n\n@media (max-width: 600px) {\n  .delete-btn, .export-btn {\n    font-size: 0.9em;        \n    right: 20px;   \n    color: blue;         \n  }\n\n  .delete-btn-c {\n    bottom: -10px;\n    right: 200px;\n  }\n  .delete-btn-cq {\n    font-size: 0.9em;\n    bottom: -10px;\n    right: -20px;\n  }\n\n\n  .delete-btn {\n    bottom: -10px;           \n  }\n \n  .completed-btn {\n    right: 100px;  \n  }\n\n  .export-btn {\n    bottom: -10px;          \n    right: 150px;\n  }\n  .content-container {\n    flex-direction: column; \n    margin-left: 0; \n  }\n\n  .section {\n    min-width: auto; \n    margin-right: 0; \n    margin-bottom: 20px; \n  }\n  .main-title {\n  margin-top: 20px; \n}\n}\n\n.item-container {\n  background-color: rgba(255, 255, 255, 0.9);\n  border: 1px solid #ddd; \n  border-radius: 8px; \n  padding: 15px; \n  margin-bottom: 15px; \n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  position: relative; \n  transition: border-color 0.3s ease; \n}\n\n.item-container.overdue {\n  border-color: red;\n  background-color: #ffe6e6;\n}\n\n.item-container.incpom {\n  border-color: red;\n  background-color: #ffe6e6;\n}\n\n\n.item-container.completed {\n  border-color: green;\n  box-shadow: 0 2px 8px rgba(0, 128, 0, 0.5); \n}\n\n.complete-btn {\n  background-color: #28a745; \n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.complete-btn:hover {\n  background-color: #218838; \n}\n\n.complete-btn:before {\n  content: '✔️ '; \n  margin-right: 8px; \n}\n\n.pomodoro-container {\n  display: flex;\n  justify-content: space-around; \n  flex-wrap: wrap; \n  gap: 20px; \n  margin: 20px auto; \n  max-width: 1200px; \n}\n\n.pomodoro-container .section {\n  flex: 1; \n  min-width: 300px; \n  max-width: 400px; \n  background-color: rgba(255, 255, 255, 0.9);\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n  text-align: center; \n}\n\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AccountUtente',\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      email: localStorage.getItem('email') || '',\n      phone: localStorage.getItem('phone') || '',\n      currentPassword: '',\n      newPassword: '',\n      errorMessage: '',\n      successMessage: ''\n    };\n  },\n  methods: {\n    async updatePassword() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.put('/api/updatePassword', {\n          username: this.username,\n          currentPassword: this.currentPassword,\n          newPassword: this.newPassword\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.successMessage = response.data.message || 'Password aggiornata con successo!';\n        console.log(\"aggiornata\");\n        this.errorMessage = '';\n        this.currentPassword = '';\n        this.newPassword = '';\n        this.$router.push('/');\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Errore durante l\\'aggiornamento della password.';\n        console.log(\"errore\", error);\n        this.successMessage = '';\n      }\n    },\n    async deleteAccount() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.delete('/api/deleteAccount', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          data: {\n            username: this.username\n          }\n        });\n        this.successMessage = response.data.message || 'Account eliminato con successo!';\n        this.errorMessage = '';\n        localStorage.clear();\n        this.$router.push('/');\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Errore durante l\\'eliminazione dell\\'account.';\n        console.log(\"errore\", error);\n        this.successMessage = '';\n      }\n    },\n    confirmDeleteAccount() {\n      if (confirm('Sei sicuro di voler eliminare il tuo account? Questa azione è irreversibile.')) {\n        this.deleteAccount();\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","username","localStorage","getItem","email","phone","currentPassword","newPassword","errorMessage","successMessage","methods","updatePassword","token","sessionStorage","response","put","headers","Authorization","message","console","log","$router","push","error","deleteAccount","delete","clear","confirmDeleteAccount","confirm"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/accountUtente.vue"],"sourcesContent":["<template>\n  <div class=\"account-utente\">\n    <div class=\"teext\">\n      <h1>Pagina Account Utente</h1>\n    </div>\n    \n    <div class=\"personal-data\">\n      <h2>Dati Personali</h2>\n      <p><strong>Username:</strong> {{ username }}</p>\n      <p><strong>Email:</strong> {{ email }}</p>\n      <p><strong>Numero di Telefono:</strong> {{ phone }}</p>\n    </div>\n\n    <div class=\"manage-password\">\n      <h2>Gestisci Password</h2>\n      <form @submit.prevent=\"updatePassword\">\n        <div class=\"mb-3\">\n          <label for=\"currentPassword\" class=\"form-label\">Password Attuale</label>\n          <input type=\"password\" class=\"form-control\" id=\"currentPassword\" v-model=\"currentPassword\" required>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"newPassword\" class=\"form-label\">Nuova Password</label>\n          <input type=\"password\" class=\"form-control\" id=\"newPassword\" v-model=\"newPassword\" required>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">Aggiorna Password</button>\n      </form>\n    </div>\n\n    <div class=\"delete-account\">\n      <h2>Elimina Account</h2>\n      <button class=\"btn btn-danger\" @click=\"confirmDeleteAccount\">Elimina Account</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AccountUtente',\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      email: localStorage.getItem('email') || '', \n      phone: localStorage.getItem('phone') || '', \n      currentPassword: '',\n      newPassword: '',\n      errorMessage: '',\n      successMessage: ''\n    };\n  },\n  methods: {\n    async updatePassword() {\n  try {\n    const token = sessionStorage.getItem('token');\n    const response = await axios.put('/api/updatePassword', {\n      username: this.username,\n      currentPassword: this.currentPassword,\n      newPassword: this.newPassword\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}` \n      }\n    });\n\n    this.successMessage = response.data.message || 'Password aggiornata con successo!';\n    console.log(\"aggiornata\");\n    this.errorMessage = '';\n\n    this.currentPassword = '';\n    this.newPassword = '';\n    this.$router.push('/'); \n  } catch (error) {\n    this.errorMessage = error.response?.data?.message || 'Errore durante l\\'aggiornamento della password.';\n    console.log(\"errore\", error);\n    this.successMessage = '';\n  }\n},\n\n    \n    async deleteAccount() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.delete('/api/deleteAccount', {\n          headers: {\n           Authorization: `Bearer ${token}` \n      },\n          data: { username: this.username }\n        });\n        \n        this.successMessage = response.data.message || 'Account eliminato con successo!';\n        this.errorMessage = '';\n        \n        localStorage.clear();\n        this.$router.push('/'); \n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || 'Errore durante l\\'eliminazione dell\\'account.';\n        console.log(\"errore\", error);\n        this.successMessage = '';\n      }\n    },\n\n    confirmDeleteAccount() {\n      if (confirm('Sei sicuro di voler eliminare il tuo account? Questa azione è irreversibile.')) {\n        this.deleteAccount();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.account-utente {\n  text-align: center;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.personal-data,\n.manage-password,\n.delete-account {\n  margin: 20px 0;\n  padding: 15px;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n}\n\n.error {\n  color: red;\n}\n\n.success {\n  color: green;\n}\n\n.teext {\n  margin: 10px 0;\n}\n</style>\n\n\n\n\n"],"mappings":";AAoCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,UAAU,KAAK,OAAO;MACrDC,KAAK,EAAEF,YAAY,CAACC,OAAO,CAAC,OAAO,KAAK,EAAE;MAC1CE,KAAK,EAAEH,YAAY,CAACC,OAAO,CAAC,OAAO,KAAK,EAAE;MAC1CG,eAAe,EAAE,EAAE;MACnBC,WAAW,EAAE,EAAE;MACfC,YAAY,EAAE,EAAE;MAChBC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,cAAcA,CAAA,EAAG;MACzB,IAAI;QACF,MAAMC,KAAI,GAAIC,cAAc,CAACV,OAAO,CAAC,OAAO,CAAC;QAC7C,MAAMW,QAAO,GAAI,MAAMhB,KAAK,CAACiB,GAAG,CAAC,qBAAqB,EAAE;UACtDd,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBK,eAAe,EAAE,IAAI,CAACA,eAAe;UACrCC,WAAW,EAAE,IAAI,CAACA;QACpB,CAAC,EAAE;UACDS,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUL,KAAK;UAChC;QACF,CAAC,CAAC;QAEF,IAAI,CAACH,cAAa,GAAIK,QAAQ,CAACd,IAAI,CAACkB,OAAM,IAAK,mCAAmC;QAClFC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;QACzB,IAAI,CAACZ,YAAW,GAAI,EAAE;QAEtB,IAAI,CAACF,eAAc,GAAI,EAAE;QACzB,IAAI,CAACC,WAAU,GAAI,EAAE;QACrB,IAAI,CAACc,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB,EAAE,OAAOC,KAAK,EAAE;QACd,IAAI,CAACf,YAAW,GAAIe,KAAK,CAACT,QAAQ,EAAEd,IAAI,EAAEkB,OAAM,IAAK,iDAAiD;QACtGC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEG,KAAK,CAAC;QAC5B,IAAI,CAACd,cAAa,GAAI,EAAE;MAC1B;IACF,CAAC;IAGG,MAAMe,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMZ,KAAI,GAAIC,cAAc,CAACV,OAAO,CAAC,OAAO,CAAC;QAC7C,MAAMW,QAAO,GAAI,MAAMhB,KAAK,CAAC2B,MAAM,CAAC,oBAAoB,EAAE;UACxDT,OAAO,EAAE;YACRC,aAAa,EAAE,UAAUL,KAAK;UACnC,CAAC;UACGZ,IAAI,EAAE;YAAEC,QAAQ,EAAE,IAAI,CAACA;UAAS;QAClC,CAAC,CAAC;QAEF,IAAI,CAACQ,cAAa,GAAIK,QAAQ,CAACd,IAAI,CAACkB,OAAM,IAAK,iCAAiC;QAChF,IAAI,CAACV,YAAW,GAAI,EAAE;QAEtBN,YAAY,CAACwB,KAAK,CAAC,CAAC;QACpB,IAAI,CAACL,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB,EAAE,OAAOC,KAAK,EAAE;QACd,IAAI,CAACf,YAAW,GAAIe,KAAK,CAACT,QAAQ,EAAEd,IAAI,EAAEkB,OAAM,IAAK,+CAA+C;QACpGC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEG,KAAK,CAAC;QAC5B,IAAI,CAACd,cAAa,GAAI,EAAE;MAC1B;IACF,CAAC;IAEDkB,oBAAoBA,CAAA,EAAG;MACrB,IAAIC,OAAO,CAAC,8EAA8E,CAAC,EAAE;QAC3F,IAAI,CAACJ,aAAa,CAAC,CAAC;MACtB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
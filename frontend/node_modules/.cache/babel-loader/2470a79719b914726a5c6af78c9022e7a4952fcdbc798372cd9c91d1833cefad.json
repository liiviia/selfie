{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  setup() {\n    const route = useRoute();\n    const newPom = ref({\n      username: localStorage.getItem('username') || 'Guest',\n      tempoStudio: 30,\n      tempoPausa: 5,\n      ripetizioni: 5,\n      giorno: ''\n    });\n    const statusMessage = ref('');\n    let studyCycles = ref(parseInt(route.query.studyCycles) || newPom.value.ripetizioni);\n    let timerInterval = null;\n    let isStudyPhase = ref(route.query.isStudyPhase === 'true');\n    let remainingTime = ref(parseInt(route.query.remainingTime) || 0);\n    let isPaused = ref(false);\n    const progressWidth = ref(0);\n    let isModalOpen = ref(false);\n    let isNotificationModalOpen = ref(false);\n    const users = ref([]);\n    const selectedUsers = ref([]);\n    let notificationsPom = ref([]);\n    const noNotificationsMessage = ref('');\n    let isHelpStudyOpen = ref(false);\n    const minutiDisponibili = ref(0);\n    let risultatiCicli = ref([]);\n    onMounted(() => {\n      if (route.query.date && !isNaN(new Date(route.query.date).getTime())) {\n        newPom.value.giorno = new Date(route.query.date).toISOString().split('T')[0];\n      } else {\n        newPom.value.giorno = new Date().toISOString().split('T')[0];\n      }\n      getUsers();\n      const query = route.query;\n      if (Object.keys(query).length > 0 && route.query.nonFare === 'true') {\n        if (route.query.nuovo === 'false') {\n          newPom.value.tempoStudio = route.query.tempoStudio ? parseInt(route.query.tempoStudio) : newPom.value.tempoStudio;\n          newPom.value.tempoPausa = route.query.tempoPausa ? parseInt(route.query.tempoPausa) : newPom.value.tempoPausa;\n          newPom.value.ripetizioni = route.query.ripetizioni ? parseInt(route.query.ripetizioni) : newPom.value.ripetizioni;\n          remainingTime.value = route.query.remainingTime ? parseInt(route.query.remainingTime) : 0;\n          studyCycles.value = route.query.studyCycles ? parseInt(route.query.studyCycles) : newPom.value.ripetizioni;\n          isStudyPhase.value = route.query.isStudyPhase ? route.query.isStudyPhase === 'true' : true;\n          if (remainingTime.value > 0) {\n            document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n            if (isStudyPhase.value) {\n              startTimerWithRemainingTime();\n            } else {\n              startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n            }\n          }\n        } else {\n          studyCycles.value = newPom.value.ripetizioni;\n          startNewCycle();\n        }\n      }\n      // per quando salvare sessione incomplete quando cambio pagina \n      router.beforeEach(async (to, from, next) => {\n        if (remainingTime.value > 0 || studyCycles.value > 0) {\n          await saveIncompleteSession();\n        }\n        next();\n      });\n\n      // per salvare quando chiudo sito\n      window.addEventListener('beforeunload', handleSaveSession);\n    });\n    onUnmounted(() => {\n      clearInterval(timerInterval);\n      // per salvare quando chiudo sito\n      window.removeEventListener('beforeunload', handleSaveSession);\n    });\n    const handleSaveSession = async () => {\n      if (remainingTime.value > 0 || studyCycles.value > 0) {\n        await saveIncompleteSession();\n      }\n    };\n    const startNewCycle = () => {\n      newPom.value.tempoStudio = route.query.tempoStudio ? parseInt(route.query.tempoStudio) : newPom.value.tempoStudio;\n      newPom.value.tempoPausa = route.query.tempoPausa ? parseInt(route.query.tempoPausa) : newPom.value.tempoPausa;\n      newPom.value.ripetizioni = route.query.ripetizioni ? parseInt(route.query.ripetizioni) : newPom.value.ripetizioni;\n      studyCycles.value = route.query.studyCycles ? parseInt(route.query.studyCycles) : newPom.value.ripetizioni;\n      remainingTime.value = route.query.remainingTime ? parseInt(route.query.remainingTime) : 0;\n      isStudyPhase.value = route.query.isStudyPhase === 'true';\n      if (remainingTime.value > 0) {\n        document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n        if (isStudyPhase.value) {\n          startStudyTimer(newPom.value.tempoStudio, studyCycles.value);\n        } else {\n          startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n        }\n      } else {\n        startStudyTimer(newPom.value.tempoStudio, studyCycles.value);\n      }\n    };\n    const updateProgressBar = totalTime => {\n      const percentage = (totalTime - remainingTime.value) / totalTime * 100;\n      progressWidth.value = Math.min(percentage, 100);\n    };\n    const getUsers = async () => {\n      try {\n        const username = localStorage.getItem('username');\n        const token = sessionStorage.getItem('token');\n        const response = await axios.get('/api/users', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        users.value = response.data;\n      } catch (error) {\n        console.error('Errore nel recupero degli utenti:', error);\n      }\n    };\n    const aggiungiPomodoro = async () => {\n      const currentDate = new Date();\n      const pomDate = new Date(newPom.value.giorno);\n      currentDate.setHours(0, 0, 0, 0);\n      if (pomDate < currentDate) {\n        alert(\"Data non valida\");\n        return;\n      }\n      try {\n        const token = sessionStorage.getItem('token');\n        const currentDate = new Date();\n        const selectedDate = new Date(newPom.value.giorno);\n        const response = await axios.post('/api/pomsPOST', newPom.value, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Sessione pomodoro aggiunta:', response.data);\n        if (selectedDate.getTime() > currentDate.getTime()) {\n          statusMessage.value = 'Sessione pomodoro aggiunta per una data futura.';\n        } else {\n          studyCycles.value = newPom.value.ripetizioni;\n          const pomodoroId = response.data._id;\n          try {\n            const startResponse = await axios.post(`/api/iniziaPomodoro/${pomodoroId}`, {}, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            console.log(startResponse);\n            startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n          } catch (startError) {\n            console.error('Errore durante l\\'avvio del pomodoro:', startError);\n            statusMessage.value = 'Errore durante l\\'avvio del pomodoro.';\n          }\n        }\n      } catch (error) {\n        console.error('Errore:', error);\n        statusMessage.value = 'Errore durante l\\'aggiunta del pomodoro.';\n      }\n    };\n    const aggiungiPomDaNotifica = async (notificationId, tempoStudio, tempoPausa, ripetizioni, giorno) => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const currentDate = new Date();\n        const newPomDaNot = ref({\n          username: localStorage.getItem('username'),\n          tempoStudio: tempoStudio,\n          tempoPausa: tempoPausa,\n          ripetizioni: ripetizioni,\n          giorno: giorno\n        });\n        const response = await axios.post('/api/pomsPOST', newPomDaNot.value, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        alert(\"perfetto, sessione aggiunta al tuo calendario!\\n ora la notifica verrÃ  eliminata\");\n        console.log(response);\n        const giornoDate = new Date(giorno);\n        if (giornoDate.getTime() > currentDate.getTime()) {\n          statusMessage.value = 'sessione pomodoro aggiunta per una data futura';\n        } else {\n          const pomodoroId = response.data._id;\n          try {\n            const startResponse = await axios.post(`/api/iniziaPomodoro/${pomodoroId}`, {}, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            console.log('Pomodoro avviato:', startResponse.data);\n            startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n          } catch (startError) {\n            console.error('Errore durante l\\'avvio del pomodoro:', startError);\n            statusMessage.value = 'Errore durante l\\'avvio del pomodoro.';\n          }\n          studyCycles.value = ripetizioni;\n          startStudyTimer(tempoStudio, studyCycles.value, tempoPausa);\n        }\n        rifiutaNotifica(notificationId);\n      } catch (error) {\n        console.error(\"errore salvataggio pomodoro da notifica:\", error);\n      }\n    };\n    const fetchInvitiPom = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/getNotifichePom', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        if (response.data) {\n          notificationsPom.value = response.data;\n        } else {\n          this.noNotificationsMessage = 'Nessuna notifica trovata.';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero delle notifiche :', error);\n        this.noNotificationsMessage = 'Errore caricamento delle notifiche.';\n      }\n    };\n    const accettaNotifica = async (notificationId, username, tempoStudio, tempoPausa, ripetizioni, giorno) => {\n      aggiungiPomDaNotifica(notificationId, username, tempoStudio, tempoPausa, ripetizioni, giorno);\n    };\n    const rifiutaNotifica = async notificationId => {\n      const token = sessionStorage.getItem('token');\n      try {\n        await axios.delete(`/api/rifiutaNotifica/${notificationId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        notificationsPom.value = notificationsPom.value.filter(notifica => notifica._id !== notificationId);\n        alert(\"Notifica eliminata\");\n      } catch (error) {\n        console.log(\"errore rifiuta notifica pom\", error);\n      }\n    };\n    const startTimerWithRemainingTime = () => {\n      isPaused.value = false;\n      clearInterval(timerInterval);\n      const totalTime = isStudyPhase.value ? newPom.value.tempoStudio * 60 : newPom.value.tempoPausa * 60;\n      timerInterval = setInterval(() => {\n        updateTimer(totalTime);\n      }, 1000);\n    };\n    const startStudyTimer = (studyTime, cycles) => {\n      if (cycles <= 0) {\n        alert('Ciclo completato!');\n        return;\n      }\n      statusMessage.value = `Studio! Numero cicli rimanenti: ${cycles}`;\n      remainingTime.value = studyTime * 60;\n      isStudyPhase.value = true;\n      isPaused.value = false;\n      progressWidth.value = 0;\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n        updateTimer(studyTime * 60);\n      }, 1000);\n    };\n    const openModal = () => {\n      isModalOpen.value = true;\n    };\n    const closeModal = () => {\n      isModalOpen.value = false;\n    };\n    const openNotificationModal = () => {\n      isNotificationModalOpen.value = true;\n      fetchInvitiPom();\n    };\n    const closeNotificationModal = () => {\n      isNotificationModalOpen.value = false;\n    };\n    const openHelpStudy = () => {\n      isHelpStudyOpen.value = true;\n    };\n    const closeHelpStudy = () => {\n      isHelpStudyOpen.value = false;\n    };\n    const studyHelp = () => {\n      const totalMinutes = minutiDisponibili.value;\n      let studyTime, breakTime, numberOfCycles;\n      const cycles = [];\n      if (totalMinutes < 25) {\n        cycles.push('troppo poco tempo per studiare!');\n      }\n      if (totalMinutes < 45) {\n        studyTime = 20;\n        breakTime = 5;\n      } else if (totalMinutes < 120) {\n        studyTime = 35;\n        breakTime = 5;\n      } else {\n        studyTime = 45;\n        breakTime = 10;\n      }\n      numberOfCycles = Math.floor(totalMinutes / (studyTime + breakTime));\n      const remainingTime = totalMinutes % (studyTime + breakTime);\n      for (let i = 0; i < numberOfCycles; i++) {\n        cycles.push(`Ciclo ${i + 1}: ${studyTime} minuti di studio e ${breakTime} minuti di pausa`);\n      }\n      if (remainingTime > 0 && totalMinutes >= 25) {\n        cycles.push(`resta questo tempo: ${remainingTime}`);\n      }\n      risultatiCicli.value = cycles;\n    };\n    const sendNotificationPom = async () => {\n      const token = sessionStorage.getItem('token');\n      const username = localStorage.getItem('username');\n      try {\n        await axios.post('/api/sendNoticationPom', {\n          username,\n          tempoStudio: newPom.value.tempoStudio,\n          tempoPausa: newPom.value.tempoPausa,\n          ripetizioni: newPom.value.ripetizioni,\n          destinatario: selectedUsers.value,\n          giorno: newPom.value.giorno\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        alert(\"notifica mandata con successo\");\n      } catch (error) {\n        console.error(\"Errore invio notifica pomodoro\", error);\n      }\n    };\n    const startBreakTimer = (pauseTime, cycles) => {\n      if (cycles <= 0) {\n        alert('Ciclo completato!');\n        return;\n      }\n      statusMessage.value = `Pausa! Numero cicli rimanenti: ${cycles}`;\n      remainingTime.value = pauseTime * 60;\n      isStudyPhase.value = false;\n      isPaused.value = false;\n      progressWidth.value = 0;\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n        updateTimer(pauseTime * 60);\n      }, 1000);\n    };\n    const updateTimer = totalTime => {\n      if (remainingTime.value > 0) {\n        remainingTime.value -= 1;\n        document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n        updateProgressBar(totalTime);\n      } else {\n        clearInterval(timerInterval);\n        studyCycles.value--;\n        if (isStudyPhase.value) {\n          startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n        } else {\n          startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n        }\n      }\n    };\n    const formatTime = timeInSeconds => {\n      const minutes = Math.floor(timeInSeconds / 60);\n      const seconds = timeInSeconds % 60;\n      return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n    };\n    const skipPhase = () => {\n      clearInterval(timerInterval);\n      progressWidth.value = 0;\n      if (isStudyPhase.value) {\n        studyCycles.value--;\n        startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n      } else {\n        startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n      }\n      if (studyCycles.value <= 0) {\n        saveIncompleteSession();\n        statusMessage.value = \"Ciclo completato!\";\n        document.getElementById('timerDisplay').textContent = \"00:00\";\n      }\n    };\n    const restartCycle = () => {\n      clearInterval(timerInterval);\n      studyCycles.value = newPom.value.ripetizioni;\n      progressWidth.value = 0;\n      startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n    };\n    const endCycle = () => {\n      clearInterval(timerInterval);\n      studyCycles.value = 0;\n      progressWidth.value = 0;\n      statusMessage.value = 'Ciclo terminato manualmente.';\n      document.getElementById('timerDisplay').textContent = \"00:00\";\n      saveIncompleteSession();\n    };\n    const pauseTimer = () => {\n      clearInterval(timerInterval);\n      isPaused.value = true;\n      saveIncompleteSession();\n    };\n    const resumeTimer = () => {\n      isPaused.value = false;\n      const totalTime = isStudyPhase.value ? newPom.value.tempoStudio * 60 : newPom.value.tempoPausa * 60;\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n        updateTimer(totalTime);\n      }, 1000);\n    };\n    const saveIncompleteSession = async () => {\n      const token = sessionStorage.getItem('token');\n      const username = newPom.value.username.trim();\n      try {\n        await axios.post('/api/poms/save-incomplete', {\n          username,\n          giorno: new Date(newPom.value.giorno).toISOString(),\n          remainingTime: remainingTime.value,\n          isStudyPhase: isStudyPhase.value,\n          studyCycles: studyCycles.value,\n          tempoStudio: newPom.value.tempoStudio,\n          tempoPausa: newPom.value.tempoPausa\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Incomplete session saved.');\n      } catch (error) {\n        console.error('Error saving incomplete session:', error);\n      }\n    };\n    return {\n      newPom,\n      statusMessage,\n      aggiungiPomodoro,\n      skipPhase,\n      restartCycle,\n      endCycle,\n      pauseTimer,\n      resumeTimer,\n      isPaused,\n      progressWidth,\n      openModal,\n      closeModal,\n      isModalOpen,\n      sendNotificationPom,\n      getUsers,\n      users,\n      selectedUsers,\n      openNotificationModal,\n      closeNotificationModal,\n      isNotificationModalOpen,\n      fetchInvitiPom,\n      notificationsPom,\n      noNotificationsMessage,\n      accettaNotifica,\n      rifiutaNotifica,\n      aggiungiPomDaNotifica,\n      openHelpStudy,\n      isHelpStudyOpen,\n      closeHelpStudy,\n      studyHelp,\n      minutiDisponibili,\n      risultatiCicli\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","useRoute","axios","setup","route","newPom","username","localStorage","getItem","tempoStudio","tempoPausa","ripetizioni","giorno","statusMessage","studyCycles","parseInt","query","value","timerInterval","isStudyPhase","remainingTime","isPaused","progressWidth","isModalOpen","isNotificationModalOpen","users","selectedUsers","notificationsPom","noNotificationsMessage","isHelpStudyOpen","minutiDisponibili","risultatiCicli","date","isNaN","Date","getTime","toISOString","split","getUsers","Object","keys","length","nonFare","nuovo","document","getElementById","textContent","formatTime","startTimerWithRemainingTime","startBreakTimer","startNewCycle","router","beforeEach","to","from","next","saveIncompleteSession","window","addEventListener","handleSaveSession","clearInterval","removeEventListener","startStudyTimer","updateProgressBar","totalTime","percentage","Math","min","token","sessionStorage","response","get","headers","Authorization","params","data","error","console","aggiungiPomodoro","currentDate","pomDate","setHours","alert","selectedDate","post","log","pomodoroId","_id","startResponse","startError","aggiungiPomDaNotifica","notificationId","newPomDaNot","giornoDate","rifiutaNotifica","fetchInvitiPom","accettaNotifica","delete","filter","notifica","setInterval","updateTimer","studyTime","cycles","openModal","closeModal","openNotificationModal","closeNotificationModal","openHelpStudy","closeHelpStudy","studyHelp","totalMinutes","breakTime","numberOfCycles","push","floor","i","sendNotificationPom","destinatario","pauseTime","timeInSeconds","minutes","seconds","String","padStart","skipPhase","restartCycle","endCycle","pauseTimer","resumeTimer","trim"],"sources":["/home/livia/Scrivania/TW/progettoTWvue/frontend/src/views/pomodoroTempo.vue"],"sourcesContent":["<template>\n  <div class=\"event-form\">\n    <h1>Sessione Pomodoro</h1>\n    <form @submit.prevent=\"aggiungiPomodoro\">\n      <div>\n        <label for=\"tempoStudio\">Tempo di studio (minuti):</label>\n        <input type=\"number\" v-model=\"newPom.tempoStudio\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"tempoPausa\">Tempo di pausa (minuti):</label>\n        <input type=\"number\" v-model=\"newPom.tempoPausa\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"ripetizioni\">Numero di ripetizioni:</label>\n        <input type=\"number\" v-model=\"newPom.ripetizioni\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"giorno\">Giorno della sessione:</label>\n        <input type=\"date\" v-model=\"newPom.giorno\" required>\n      </div>\n\n      <button type=\"submit\" class=\"rounded-btn\">Aggiungi Sessione</button>\n    </form>\n\n    <p id=\"studio-pausa\">{{ statusMessage }}</p>\n\n\n     <div class=\"progress-bar-container\">\n      <div class=\"progress-bar\" :style=\"{ width: progressWidth + '%' }\"></div>\n    </div>\n\n    <div class=\"timer\" id=\"timerDisplay\">00:00</div>\n\n    <div class=\"controls\">\n  <div class=\"button-row\">\n    <button @click=\"skipPhase\">Salta alla fase successiva</button>\n    <button @click=\"restartCycle\">Ricomincia ciclo</button>\n  </div>\n  <div class=\"button-row\">\n    <button @click=\"endCycle\">Termina ciclo</button>\n    <button @click=\"pauseTimer\">Stoppa timer</button>\n    <button v-if=\"isPaused\" @click=\"resumeTimer\">Riprendi timer</button> \n  </div>\n</div>\n\n  </div>\n\n\n\n                   <button class=\"fixed-button\" @click=\"openNotificationModal\" style=\"background:#f4a460; margin-bottom: 10px;\">\n                  Vedi Notifiche\n                    </button>\n\n\n                    <div v-if=\"isNotificationModalOpen\" class=\"modal\" @click.self=\"closeNotificationModal\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\" style=\"background: linear-gradient(to bottom, #f4a460, #eee8aa);\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title fs-5\">Notifiche</h1>\n          </div>\n          <div class=\"modal-body\">\n            <p>Qui puoi visualizzare tutte le notifiche ricevute.</p>\n            <ul>\n              <li v-for=\"(notifica, index) in notificationsPom\" :key=\"index\">\n      <p><strong>INVITATO DA:</strong> {{ notifica.username }}</p>\n      <p><strong>TEMPO STUDIO:</strong> {{ notifica.tempoStudio }} minuti</p>\n      <p><strong>TEMPO PAUSA:</strong> {{ notifica.tempoPausa }} minuti</p>\n      <p><strong>RIPETIZIONI:</strong> {{ notifica.ripetizioni }}</p>\n      <p><strong>GIORNO:</strong> {{ new Date(notifica.giorno).toLocaleDateString() }}</p>\n                  <button @click=\"rifiutaNotifica(notifica._id)\" class=\"delete-btn\">ðï¸</button>\n                  <button  @click=\"accettaNotifica(\n                    notifica._id,\n                  Number(notifica.tempoStudio), \n                  Number(notifica.tempoPausa), \n                   Number(notifica.ripetizioni),  \n                     notifica.giorno)\" style=\"background: #f4a460;\">accetta</button>\n      <hr> âââââ\n    </li>\n           </ul>\n\n\n\n\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeNotificationModal\" style=\"background:#f4a460;\">Chiudi</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n\n   <button class=\"fixed-button\" @click=\"openHelpStudy\" style=\"background:#f4a460; margin-bottom: 10px;\">\n                  Non sai come studiare?\n                    </button>\n\n\n                    <div v-if=\"isHelpStudyOpen\" class=\"modal\" @click.self=\"closeHelpStudy\" style=\"background: #f4a460;\">\n                      <div class=\"modal-dialog\">\n        <div class=\"modal-content\" style=\"background: linear-gradient(to bottom, #f4a460, #eee8aa);\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title\">iinsersici qui quanti minuti hai a disposizione:</h1>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"recipient-name\">minuti a disposizione:</label>\n               <input type=\"number\" v-model=\"minutiDisponibili\">\n               <button type=\"button\" @click=\"studyHelp\">calcola</button>\n             </div>\n                  </form>\n\n                  <h4>hai a disposizione:</h4>\n                  <div v-if=\"risultatiCicli.length > 0\">\n        <ul>\n          <li v-for=\"(cycle, index) in risultatiCicli\" :key=\"index\">{{ cycle }}</li>\n        </ul>\n      </div>\n\n          \n          <div class=\"modal-footer\">\n            <button class=\"btn btn-secondary\" @click=\"closeHelpStudy\" style=\"background:#f4a460;\">Chiudi</button>\n           \n          </div>\n        </div>\n      </div>\n\n                    </div>\n\n                  \n    \n\n  <button class=\"fixed-button\" @click=\"openModal\"  style=\"background:#f4a460;\">\n  <i class=\"fas fa-paper-plane\"></i>\n</button>\n\n\n<div v-if=\"isModalOpen\" class=\"modal\" @click.self=\"closeModal\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\" style=\"background: linear-gradient(to bottom, #f4a460, #eee8aa);\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title\">invita un amico a studiare con le tue impostazioni:</h1>\n          </div>\n          <form>\n  <div class=\"form-group\">\n    <label for=\"recipient-name\">Destinatario:</label>\n    <select id=\"userSelect\" v-model=\"selectedUsers\" multiple class=\"form-control\">\n      <option v-for=\"user in users\" :key=\"user._id\" :value=\"user._id\">\n        {{ user.username }}\n      </option>\n    </select>\n  </div>\n</form>\n\n          <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <label for=\"recipient-name\">invita:</label>\n                <button class=\"btn btn-primary\" @click=\"sendNotificationPom\" style=\"background:#f4a460;\">\n              <i class=\"fas fa-paper-plane\"></i>\n            </button>\n                \n              </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-secondary\" @click=\"closeModal\" style=\"background:#f4a460;\">Chiudi</button>\n           \n          </div>\n        </div>\n      </div>\n    </div>\n\n\n</template>\n\n<script>\nimport { ref, onMounted,  onUnmounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\n\n\nexport default {\n  setup() {\n\n\n\n    const route = useRoute();\n\n    const newPom = ref({\n      username: localStorage.getItem('username') || 'Guest',\n      tempoStudio: 30,  \n      tempoPausa: 5,    \n      ripetizioni: 5,  \n      giorno: ''\n    });\n    \n   const statusMessage = ref('');\n    let studyCycles = ref(parseInt(route.query.studyCycles) || newPom.value.ripetizioni);\n    let timerInterval = null;\n    let isStudyPhase = ref(route.query.isStudyPhase === 'true');\n    let remainingTime = ref(parseInt(route.query.remainingTime) || 0);\n    let isPaused = ref(false);\n    const progressWidth = ref(0);\n    let isModalOpen = ref(false);\n    let isNotificationModalOpen = ref(false);\n    const users = ref([]); \n    const selectedUsers = ref([]);\n    let notificationsPom = ref([]);\n    const noNotificationsMessage = ref('');\n    let isHelpStudyOpen = ref(false);\n    const minutiDisponibili = ref(0); \n    let  risultatiCicli = ref([]);\n\n\n  onMounted(() => {\n\n    if (route.query.date && !isNaN(new Date(route.query.date).getTime())) {\n  newPom.value.giorno = new Date(route.query.date).toISOString().split('T')[0];\n} else {\n  newPom.value.giorno = new Date().toISOString().split('T')[0];\n}\n\n\n    getUsers();\n\n\n\n    const query = route.query;\n    \n    if (Object.keys(query).length > 0 && route.query.nonFare === 'true'){\n\n\n  if(route.query.nuovo === 'false'){\n  newPom.value.tempoStudio = route.query.tempoStudio\n    ? parseInt(route.query.tempoStudio)\n    : newPom.value.tempoStudio;\n\n  newPom.value.tempoPausa = route.query.tempoPausa\n    ? parseInt(route.query.tempoPausa)\n    : newPom.value.tempoPausa;\n\n  newPom.value.ripetizioni = route.query.ripetizioni\n    ? parseInt(route.query.ripetizioni)\n    : newPom.value.ripetizioni;\n\n  remainingTime.value = route.query.remainingTime\n    ? parseInt(route.query.remainingTime)\n    : 0;\n\n  studyCycles.value = route.query.studyCycles\n    ? parseInt(route.query.studyCycles)\n    : newPom.value.ripetizioni;\n\n  isStudyPhase.value = route.query.isStudyPhase\n    ? route.query.isStudyPhase === 'true'\n    : true;\n\n\n  \n\n  if (remainingTime.value > 0) {\n    document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n\n    if (isStudyPhase.value) {\n      startTimerWithRemainingTime();\n    } else {\n      startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n    }\n  }\n\n}  \n  else {\n    studyCycles.value = newPom.value.ripetizioni;\n    startNewCycle();\n  }\n\n}\n// per quando salvare sessione incomplete quando cambio pagina \nrouter.beforeEach(async (to, from, next) => {\n    if (remainingTime.value > 0 || studyCycles.value > 0) {\n      await saveIncompleteSession();\n    }\n    next();\n  });\n\n    // per salvare quando chiudo sito\n    window.addEventListener('beforeunload', handleSaveSession);\n\n});\n\n\n    onUnmounted(() => {\n      clearInterval(timerInterval); \n      // per salvare quando chiudo sito\n      window.removeEventListener('beforeunload', handleSaveSession);\n    });\n\n    \nconst handleSaveSession = async () => {\n  if (remainingTime.value > 0 || studyCycles.value > 0) {\n    await saveIncompleteSession();\n  }\n};\n\nconst startNewCycle = () => {\n  newPom.value.tempoStudio = route.query.tempoStudio ? parseInt(route.query.tempoStudio) : newPom.value.tempoStudio;\n  newPom.value.tempoPausa = route.query.tempoPausa ? parseInt(route.query.tempoPausa) : newPom.value.tempoPausa;\n  newPom.value.ripetizioni = route.query.ripetizioni ? parseInt(route.query.ripetizioni) : newPom.value.ripetizioni;\n  studyCycles.value = route.query.studyCycles ? parseInt(route.query.studyCycles) : newPom.value.ripetizioni;\n  remainingTime.value = route.query.remainingTime ? parseInt(route.query.remainingTime) : 0;\n  isStudyPhase.value = route.query.isStudyPhase === 'true';\n\n  \n  if (remainingTime.value > 0) {\n    document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n\n    if (isStudyPhase.value) {\n      startStudyTimer(newPom.value.tempoStudio, studyCycles.value);\n    } else {\n      startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n    }\n  } else {\n\n    startStudyTimer(newPom.value.tempoStudio, studyCycles.value);\n  }\n};\n\n\n\n\n    const updateProgressBar = (totalTime) => {\n      const percentage = ((totalTime - remainingTime.value) / totalTime) * 100;\n      progressWidth.value = Math.min(percentage, 100);\n    };\n\n\n\n    const getUsers = async () => {\n      try {\n        const username = localStorage.getItem('username');\n        const token = sessionStorage.getItem('token');\n        const response = await axios.get('/api/users', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { username: username }\n        });\n        users.value = response.data; \n      } catch (error) {\n        console.error('Errore nel recupero degli utenti:', error);\n      }\n    };\n\n\n    const aggiungiPomodoro = async () => {\n\n      const currentDate = new Date();\n  const pomDate = new Date(newPom.value.giorno);\n\n  currentDate.setHours(0, 0, 0, 0);\n\n  if (pomDate < currentDate) {\n      alert(\"Data non valida\"); \n    return; \n  }\n\n\n  try {\n    const token = sessionStorage.getItem('token');\n    const currentDate = new Date();\n    const selectedDate = new Date(newPom.value.giorno);\n\n    const response = await axios.post('/api/pomsPOST', newPom.value, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n\n    console.log('Sessione pomodoro aggiunta:', response.data);\n\n    if (selectedDate.getTime() > currentDate.getTime()) {\n      statusMessage.value = 'Sessione pomodoro aggiunta per una data futura.';\n    } else {\n      studyCycles.value = newPom.value.ripetizioni;\n\n      const pomodoroId = response.data._id; \n      try {\n  const startResponse = await axios.post(\n    `/api/iniziaPomodoro/${pomodoroId}`,\n    {}, \n    {\n      headers: { Authorization: `Bearer ${token}` } \n    }\n  );\n  console.log(startResponse);\n\n\n  startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n} catch (startError) {\n  console.error('Errore durante l\\'avvio del pomodoro:', startError);\n  statusMessage.value = 'Errore durante l\\'avvio del pomodoro.';\n}\n\n     \n    }\n  } catch (error) {\n    console.error('Errore:', error);\n    statusMessage.value = 'Errore durante l\\'aggiunta del pomodoro.';\n  }\n};\n\n\n\n    const aggiungiPomDaNotifica = async (notificationId , tempoStudio , tempoPausa , ripetizioni , giorno) => {\n      \n      try {\n        const token = sessionStorage.getItem('token');\n        const currentDate = new Date();\n\n\n        const newPomDaNot = ref({\n          username: localStorage.getItem('username'),\n          tempoStudio: tempoStudio , \n          tempoPausa: tempoPausa,\n          ripetizioni: ripetizioni ,\n          giorno: giorno\n        });\n\n        const response = await axios.post('/api/pomsPOST', newPomDaNot.value, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n\n        alert(\"perfetto, sessione aggiunta al tuo calendario!\\n ora la notifica verrÃ  eliminata\"); \n        console.log(response);\n\n        const giornoDate = new Date(giorno);\n\n        if(giornoDate.getTime() > currentDate.getTime()) {\n          statusMessage.value = 'sessione pomodoro aggiunta per una data futura';\n        }  else {\n          const pomodoroId = response.data._id; \n      try {\n  const startResponse = await axios.post(\n    `/api/iniziaPomodoro/${pomodoroId}`,\n    {}, \n    {\n      headers: { Authorization: `Bearer ${token}` }\n    }\n  );\n\n  console.log('Pomodoro avviato:', startResponse.data);\n\n  startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n} catch (startError) {\n  console.error('Errore durante l\\'avvio del pomodoro:', startError);\n  statusMessage.value = 'Errore durante l\\'avvio del pomodoro.';\n}\n          studyCycles.value = ripetizioni;\n          startStudyTimer(tempoStudio, studyCycles.value , tempoPausa);\n        }\n\n        rifiutaNotifica(notificationId);\n\n\n      } catch (error) {\n        console.error(\"errore salvataggio pomodoro da notifica:\", error);\n      }\n\n    };\n\n\n     \n    const fetchInvitiPom = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/getNotifichePom', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { username: username }\n        });\n        if (response.data) {\n          notificationsPom.value = response.data;\n        } else {\n          this.noNotificationsMessage = 'Nessuna notifica trovata.';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero delle notifiche :', error);\n        this.noNotificationsMessage = 'Errore caricamento delle notifiche.';\n      }\n    };\n\n\n\n        const accettaNotifica = async ( notificationId ,username , tempoStudio , tempoPausa , ripetizioni , giorno) => {\n        \n          aggiungiPomDaNotifica( notificationId , username , tempoStudio , tempoPausa , ripetizioni , giorno);\n          \n           \n\n        };\n\n\n        const rifiutaNotifica = async (notificationId) => {\n  const token = sessionStorage.getItem('token');\n\n  try {\n    await axios.delete(`/api/rifiutaNotifica/${notificationId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    notificationsPom.value = notificationsPom.value.filter(\n          notifica => notifica._id !== notificationId\n  );\n    alert(\"Notifica eliminata\");\n\n  } catch (error) {\n    console.log(\"errore rifiuta notifica pom\", error);\n  }\n};\n\n         \n\n\n      \n   const startTimerWithRemainingTime = () => {\n      isPaused.value = false;\n      clearInterval(timerInterval);\n      const totalTime = isStudyPhase.value ? newPom.value.tempoStudio * 60 : newPom.value.tempoPausa * 60;\n      timerInterval = setInterval(() => {\n        updateTimer(totalTime);\n      }, 1000);\n    };\n\n    const startStudyTimer = (studyTime, cycles) => {\n      if (cycles <= 0) {\n        alert('Ciclo completato!');\n        return;\n      }\n      statusMessage.value = `Studio! Numero cicli rimanenti: ${cycles}`;\n      remainingTime.value = studyTime * 60;\n      isStudyPhase.value = true;\n      isPaused.value = false;\n      progressWidth.value = 0;\n\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n        updateTimer(studyTime * 60);\n      }, 1000);\n    };\n\n\n    const openModal  =  () =>  {\n      isModalOpen.value = true;\n    };\n    const closeModal  =  () =>  {\n      isModalOpen.value = false;\n    };\n\n    const openNotificationModal = () => {\n       isNotificationModalOpen.value = true;\n       fetchInvitiPom();\n    };\n\n    const closeNotificationModal = () => {\n      isNotificationModalOpen.value = false;\n    }\n\n    const openHelpStudy = () => {\n       isHelpStudyOpen.value = true;\n    };\n\n    const closeHelpStudy = () => {\n      isHelpStudyOpen.value = false;\n    };\n\n    const studyHelp = () => {\n    const totalMinutes = minutiDisponibili.value; \n\n    let studyTime, breakTime, numberOfCycles;\n    const cycles = [];\n    \n    if(totalMinutes < 25) {\n      cycles.push('troppo poco tempo per studiare!');\n    }\n\n    if (totalMinutes < 45) {\n        studyTime = 20;\n        breakTime = 5;\n    } else if (totalMinutes < 120) {\n        studyTime = 35;\n        breakTime = 5;\n    } else {\n        studyTime = 45;\n        breakTime = 10;\n    }\n\n\n    numberOfCycles = Math.floor(totalMinutes / (studyTime + breakTime));\n\n\n    const remainingTime = totalMinutes % (studyTime + breakTime);\n\n\n    \n    for (let i = 0; i < numberOfCycles; i++) {\n        cycles.push(`Ciclo ${i + 1}: ${studyTime} minuti di studio e ${breakTime} minuti di pausa`);\n    }\n\n\n    if (remainingTime > 0 && totalMinutes >= 25) {\n        cycles.push(`resta questo tempo: ${remainingTime}`);\n    }\n\n\n    risultatiCicli.value = cycles;\n};\n\n\n\n    const sendNotificationPom = async () => {\n  const token = sessionStorage.getItem('token');\n  const username = localStorage.getItem('username');\n\n\n  try {\n    await axios.post(\n      '/api/sendNoticationPom',\n      {\n        username,\n        tempoStudio: newPom.value.tempoStudio,\n        tempoPausa: newPom.value.tempoPausa,\n        ripetizioni: newPom.value.ripetizioni,\n        destinatario: selectedUsers.value,\n        giorno: newPom.value.giorno\n      },\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    alert(\"notifica mandata con successo\");\n  } catch (error) {\n    console.error(\"Errore invio notifica pomodoro\", error);\n  }\n};\n\n\n\n\n     const startBreakTimer = (pauseTime, cycles) => {\n      if (cycles <= 0) {\n        alert('Ciclo completato!');\n        return;\n      }\n      statusMessage.value = `Pausa! Numero cicli rimanenti: ${cycles}`;\n      remainingTime.value = pauseTime * 60;\n      isStudyPhase.value = false;\n      isPaused.value = false;\n      progressWidth.value = 0;\n\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n        updateTimer(pauseTime * 60);\n      }, 1000);\n    };\n    \n    const updateTimer = (totalTime) => {\n      if (remainingTime.value > 0) {\n        remainingTime.value -= 1;\n        document.getElementById('timerDisplay').textContent = formatTime(remainingTime.value);\n        updateProgressBar(totalTime);\n      } else {\n        clearInterval(timerInterval);\n        studyCycles.value--;\n        if (isStudyPhase.value) {\n          startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n        } else {\n          startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n        }\n      }\n    };\n\n    const formatTime = (timeInSeconds) => {\n      const minutes = Math.floor(timeInSeconds / 60);\n      const seconds = timeInSeconds % 60;\n      return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n    };\n\n\n    const skipPhase = () => {\n      clearInterval(timerInterval);\n      progressWidth.value = 0;\n\n      if (isStudyPhase.value) {\n        studyCycles.value--;\n        startBreakTimer(newPom.value.tempoPausa, studyCycles.value);\n      } else {\n        startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n      }\n\n      if (studyCycles.value <= 0) {\n        saveIncompleteSession();\n        statusMessage.value = \"Ciclo completato!\";\n        document.getElementById('timerDisplay').textContent = \"00:00\";\n      }\n    };\n\n    const restartCycle = () => {\n      clearInterval(timerInterval);\n      studyCycles.value = newPom.value.ripetizioni;\n      progressWidth.value = 0;\n      startStudyTimer(newPom.value.tempoStudio, studyCycles.value, newPom.value.tempoPausa);\n    };\n\n    const endCycle = () => {\n      clearInterval(timerInterval);\n      studyCycles.value = 0;\n      progressWidth.value = 0;\n      statusMessage.value = 'Ciclo terminato manualmente.';\n      document.getElementById('timerDisplay').textContent = \"00:00\";\n      saveIncompleteSession();\n    };\n\n    const pauseTimer = () => {\n      clearInterval(timerInterval);\n      isPaused.value = true;\n      saveIncompleteSession();\n    };\n\n    const resumeTimer = () => {\n      isPaused.value = false;\n      const totalTime = isStudyPhase.value ? newPom.value.tempoStudio * 60 : newPom.value.tempoPausa * 60;\n\n      clearInterval(timerInterval);\n      timerInterval = setInterval(() => {\n      updateTimer(totalTime);\n      }, 1000); \n  };\n\n    const saveIncompleteSession = async () => {\n      const token = sessionStorage.getItem('token');\n      const username = newPom.value.username.trim();\n\n      try {\n        await axios.post('/api/poms/save-incomplete', {\n          username,\n          giorno: new Date(newPom.value.giorno).toISOString(), \n          remainingTime: remainingTime.value,\n          isStudyPhase: isStudyPhase.value,\n          studyCycles: studyCycles.value,\n          tempoStudio: newPom.value.tempoStudio, \n          tempoPausa: newPom.value.tempoPausa\n        }, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        console.log('Incomplete session saved.');\n      } catch (error) {\n        console.error('Error saving incomplete session:', error);\n      }\n    };\n\n    return {\n      newPom,\n      statusMessage,\n      aggiungiPomodoro,\n      skipPhase,\n      restartCycle,\n      endCycle,\n      pauseTimer,\n      resumeTimer,\n      isPaused, \n      progressWidth,\n      openModal,\n      closeModal,\n      isModalOpen,\n      sendNotificationPom,\n      getUsers,\n      users,\n      selectedUsers,\n      openNotificationModal,\n      closeNotificationModal,\n      isNotificationModalOpen,\n      fetchInvitiPom,\n      notificationsPom,\n      noNotificationsMessage,\n      accettaNotifica,\n      rifiutaNotifica,\n      aggiungiPomDaNotifica,\n      openHelpStudy,\n      isHelpStudyOpen,\n      closeHelpStudy,\n      studyHelp,\n      minutiDisponibili,\n      risultatiCicli\n    };\n  }\n};\n\n\n</script>\n\n\n\n<style scoped>\n#clock {\n  margin-top: 20px;\n}\n\n.progress-bar-container {\n  width: 100%;\n  height: 20px;\n  background-color: #e0e0e0; \n  overflow: hidden;\n  margin-bottom: 20px;\n}\n\n.progress-bar {\n  height: 100%;\n  background-color: green;\n  width: 0%;\n  transition: width 1s linear;\n}\n\n.timer {\n  font-size: 2em;\n  text-align: center;\n  margin-bottom: 10px;\n}\n\nform {\n  max-width: 400px;\n  margin: auto;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n}\n\nbutton {\n  padding: 10px 20px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\nbutton.rounded-btn {\n  border-radius: 20px; \n}\n\n\n.controls {\n  margin-top: 20px;\n  margin-bottom: 40px;\n  display: flex; \n  flex-wrap: wrap; \n  justify-content: center; \n}\n\n.controls button {\n  padding: 10px;\n  margin: 10px; \n  background-color: #007bff;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n}\n\n.button-row {\n  display: flex; \n  justify-content: space-between; \n  margin-bottom: 10px; \n}\n\n.controls button {\n  flex: 1; \n  margin-right: 10px; \n}\n\n.controls button:last-child {\n  margin-right: 0;\n}\n\n#clock {\n  margin-top: 40px;\n}\n\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5); \n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1001; \n}\n\n.modal-content {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n.fixed-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n}\n\n.fixed-button:nth-of-type(1) {\n  bottom: 90px;\n}\n\n.fixed-button:nth-of-type(2) {\n  bottom: 50px; \n}\n\n.fixed-button:nth-of-type(3) {\n  bottom: 20px; \n}\n\n\n.notification-item {\n  padding: 10px; \n}\n\n.notification-separator {\n  border: none; \n  height: 5px; \n  background-color: blue;\n  margin: 10px 0; \n}\n\n.notification-item:last-child .notification-separator {\n  display: none; \n}\n\n\n.notification-item {\n  position: relative;\n  padding: 10px;\n  margin: 10px;\n  border: 1px solid #ccc; \n}\n\n.notification-footer {\n  position: absolute; \n  bottom: 30px; \n  right: 10px; \n}\n\n.delete-btn {\n  background: none;\n  border: none; \n  cursor: pointer;\n}\n\n\n@media (max-width: 600px) {\n  h1 {\n    margin-top: 30px; \n  }\n\n  .controls button {\n    margin-right: 10px; \n  }\n}\n\n\n\n</style>\n\n\n\n<style scoped>\n#clock {\n  margin-top: 20px;\n}\n\n.progress-bar-container {\n  width: 100%;\n  height: 20px;\n  background-color: #e0e0e0; \n  overflow: hidden;\n  margin-bottom: 20px;\n}\n\n.progress-bar {\n  height: 100%;\n  background-color: green;\n  width: 0%;\n  transition: width 1s linear;\n}\n\n.timer {\n  font-size: 2em;\n  text-align: center;\n  margin-bottom: 10px;\n}\n\nform {\n  max-width: 400px;\n  margin: auto;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n}\n\nbutton {\n  padding: 10px 20px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\nbutton.rounded-btn {\n  border-radius: 20px; \n}\n\n\n.controls {\n  margin-top: 20px;\n  margin-bottom: 40px;\n  display: flex; \n  flex-wrap: wrap; \n  justify-content: center; \n}\n\n.controls button {\n  padding: 10px;\n  margin: 10px; \n  background-color: #007bff;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n}\n\n.button-row {\n  display: flex; \n  justify-content: space-between; \n  margin-bottom: 10px; \n}\n\n.controls button {\n  flex: 1; \n  margin-right: 10px; \n}\n\n.controls button:last-child {\n  margin-right: 0;\n}\n\n#clock {\n  margin-top: 40px;\n}\n\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5); \n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1001; \n}\n\n.modal-content {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n.fixed-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n}\n\n.fixed-button:nth-of-type(1) {\n  bottom: 90px; \n}\n\n.fixed-button:nth-of-type(2) {\n  bottom: 50px; \n}\n\n.fixed-button:nth-of-type(3) {\n  bottom: 20px; \n}\n\n\n.notification-item {\n  padding: 10px; \n}\n\n.notification-separator {\n  border: none; \n  height: 5px; \n  background-color: blue;\n  margin: 10px 0; \n}\n\n.notification-item:last-child .notification-separator {\n  display: none; \n}\n\n\n.notification-item {\n  position: relative;\n  padding: 10px;\n  margin: 10px;\n  border: 1px solid #ccc; \n}\n\n.notification-footer {\n  position: absolute; \n  bottom: 30px; \n  right: 10px; \n}\n\n.delete-btn {\n  background: none;\n  border: none; \n  cursor: pointer;\n}\n\n\n@media (max-width: 600px) {\n  .fixed-button {\n  position: fixed; \n    right: 10px; \n  padding: 8px 15px; \n  font-size: 0.8rem; \n}\n\n\n\n\n \n\n  .controls button {\n    padding: 6px 12px;  \n    font-size: 0.9rem; \n    margin: 5px;         \n  }\n\n  \n  h1 {\n    margin-top: 30px; \n  }\n\n  .controls button {\n    margin-right: 10px; \n  }\n}\n\n\n\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      events: []\n    };\n  },\n  methods: {\n    confirmDelete(id) {\n      if (confirm(\"Sicuro di voler eliminare questo Evento?\")) {\n        this.deleteEvents(id);\n      }\n    },\n    async deleteEvents(id) {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.delete(`/api/eventsRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Evento eliminato');\n        this.fetchEvents();\n      } catch (error) {\n        console.error('Errore nell\\'eliminazione di evento:', error);\n      }\n    },\n    async fetchEvents() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/eventsGET', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author: username\n          }\n        });\n        // Filtraggio degli eventi scaduti\n        const currentDate = new Date();\n        this.events = response.data.filter(event => new Date(event.date) >= currentDate);\n      } catch (error) {\n        console.error('Errore nel recupero degli eventi:', error);\n      }\n    },\n    formatDate(date) {\n      const d = new Date(date);\n      return d.toLocaleDateString();\n    },\n    formatRepeat(event) {\n      if (event.repeatFrequency) {\n        let frequencyDetails = `${event.repeatFrequency}`;\n        if (event.daysOfWeek && event.daysOfWeek.length) {\n          frequencyDetails += ` ogni ${event.daysOfWeek.join(', ')}`;\n        }\n        if (event.dayOfMonth) {\n          frequencyDetails += ` ogni ${event.dayOfMonth}¬∞ giorno del mese`;\n        }\n        if (event.repeatUntil) {\n          frequencyDetails += ` fino al ${this.formatDate(event.repeatUntil)}`;\n        }\n        return frequencyDetails;\n      }\n      return 'Nessuna ripetizione';\n    }\n  },\n  mounted() {\n    this.fetchEvents();\n  }\n};","map":{"version":3,"names":["axios","data","events","methods","confirmDelete","id","confirm","deleteEvents","token","sessionStorage","getItem","delete","headers","Authorization","console","log","fetchEvents","error","username","localStorage","response","get","params","author","currentDate","Date","filter","event","date","formatDate","d","toLocaleDateString","formatRepeat","repeatFrequency","frequencyDetails","daysOfWeek","length","join","dayOfMonth","repeatUntil","mounted"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/eventsE.vue"],"sourcesContent":["<template>\n  <div class=\"event-list\">\n    <h1>Lista Eventi</h1>\n    <h2>Numero Eventi: {{ events.length }}</h2>\n    <ul>\n      <li v-for=\"event in events\" :key=\"event._id\" class=\"event-item\">\n        <h2>{{ event.title }}</h2>\n        <p>{{ event.description }}</p>\n        <p><strong>Data:</strong> {{ formatDate(event.date) }}</p>\n        <p><strong>Orario:</strong> {{ event.time }}</p>\n        <p><strong>Durata:</strong> {{ event.duration }} minuti</p>\n        <p><strong>Luogo:</strong> {{ event.location }}</p>\n        <p><strong>Ripetizione:</strong> {{ formatRepeat(event) }}</p>\n        <p><strong>Autore:</strong> {{ event.author }}</p>\n        <button @click=\"confirmDelete(event._id)\" class=\"delete-btn\">üóëÔ∏è</button>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      events: []\n    };\n  },\n  methods: {\n    confirmDelete(id) {\n      if (confirm(\"Sicuro di voler eliminare questo Evento?\")) {\n        this.deleteEvents(id); \n      }\n    },\n    \n    async deleteEvents(id) {\n      try {\n        const token = sessionStorage.getItem('token');\n        await axios.delete(`/api/eventsRemove/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}` \n          }\n        });\n        console.log('Evento eliminato');\n        this.fetchEvents(); \n      } catch (error) {\n        console.error('Errore nell\\'eliminazione di evento:', error);\n      }\n    },\n\n    async fetchEvents() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username'); \n        const response = await axios.get('/api/eventsGET', {\n          headers: {\n            Authorization: `Bearer ${token}` \n          },\n          params: { author: username }\n        });\n        // Filtraggio degli eventi scaduti\n        const currentDate = new Date();\n        this.events = response.data.filter(event => \n          new Date(event.date) >= currentDate\n        );\n      } catch (error) {\n        console.error('Errore nel recupero degli eventi:', error);\n      }\n    },\n    \n    formatDate(date) {\n      const d = new Date(date);\n      return d.toLocaleDateString();\n    },\n\n    formatRepeat(event) {\n      if (event.repeatFrequency) {\n        let frequencyDetails = `${event.repeatFrequency}`;\n        if (event.daysOfWeek && event.daysOfWeek.length) {\n          frequencyDetails += ` ogni ${event.daysOfWeek.join(', ')}`;\n        }\n        if (event.dayOfMonth) {\n          frequencyDetails += ` ogni ${event.dayOfMonth}¬∞ giorno del mese`;\n        }\n        if (event.repeatUntil) {\n          frequencyDetails += ` fino al ${this.formatDate(event.repeatUntil)}`;\n        }\n        return frequencyDetails;\n      }\n      return 'Nessuna ripetizione';\n    }\n  },\n  mounted() {\n    this.fetchEvents();\n  }\n};\n</script>\n\n<style scoped>\n.event-list {\n  max-width: 800px;\n  margin: 20px auto;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\nh1 {\n  text-align: center;\n  margin-bottom: 20px;\n  color: #343a40;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\n.event-item {\n  margin-bottom: 20px;\n  border-bottom: 1px solid #ccc;\n  padding-bottom: 10px;\n  padding-right: 40px; \n  position: relative; \n}\n\n.event-item h2 {\n  color: #007bff;\n  margin: 0;\n}\n\n.event-item p {\n  margin: 5px 0;\n}\n\n.delete-btn {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 24px;\n}\n\n.delete-btn:hover {\n  color: red;\n}\n</style>\n"],"mappings":"AAqBA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,aAAaA,CAACC,EAAE,EAAE;MAChB,IAAIC,OAAO,CAAC,0CAA0C,CAAC,EAAE;QACvD,IAAI,CAACC,YAAY,CAACF,EAAE,CAAC;MACvB;IACF,CAAC;IAED,MAAME,YAAYA,CAACF,EAAE,EAAE;MACrB,IAAI;QACF,MAAMG,KAAI,GAAIC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;QAC7C,MAAMV,KAAK,CAACW,MAAM,CAAC,qBAAqBN,EAAE,EAAE,EAAE;UAC5CO,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUL,KAAK;UAChC;QACF,CAAC,CAAC;QACFM,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAC/B,IAAI,CAACC,WAAW,CAAC,CAAC;MACpB,EAAE,OAAOC,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;MAC9D;IACF,CAAC;IAED,MAAMD,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMR,KAAI,GAAIC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;QAC7C,MAAMQ,QAAO,GAAIC,YAAY,CAACT,OAAO,CAAC,UAAU,CAAC;QACjD,MAAMU,QAAO,GAAI,MAAMpB,KAAK,CAACqB,GAAG,CAAC,gBAAgB,EAAE;UACjDT,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUL,KAAK;UAChC,CAAC;UACDc,MAAM,EAAE;YAAEC,MAAM,EAAEL;UAAS;QAC7B,CAAC,CAAC;QACF;QACA,MAAMM,WAAU,GAAI,IAAIC,IAAI,CAAC,CAAC;QAC9B,IAAI,CAACvB,MAAK,GAAIkB,QAAQ,CAACnB,IAAI,CAACyB,MAAM,CAACC,KAAI,IACrC,IAAIF,IAAI,CAACE,KAAK,CAACC,IAAI,KAAKJ,WAC1B,CAAC;MACH,EAAE,OAAOP,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;MAC3D;IACF,CAAC;IAEDY,UAAUA,CAACD,IAAI,EAAE;MACf,MAAME,CAAA,GAAI,IAAIL,IAAI,CAACG,IAAI,CAAC;MACxB,OAAOE,CAAC,CAACC,kBAAkB,CAAC,CAAC;IAC/B,CAAC;IAEDC,YAAYA,CAACL,KAAK,EAAE;MAClB,IAAIA,KAAK,CAACM,eAAe,EAAE;QACzB,IAAIC,gBAAe,GAAI,GAAGP,KAAK,CAACM,eAAe,EAAE;QACjD,IAAIN,KAAK,CAACQ,UAAS,IAAKR,KAAK,CAACQ,UAAU,CAACC,MAAM,EAAE;UAC/CF,gBAAe,IAAK,SAASP,KAAK,CAACQ,UAAU,CAACE,IAAI,CAAC,IAAI,CAAC,EAAE;QAC5D;QACA,IAAIV,KAAK,CAACW,UAAU,EAAE;UACpBJ,gBAAe,IAAK,SAASP,KAAK,CAACW,UAAU,mBAAmB;QAClE;QACA,IAAIX,KAAK,CAACY,WAAW,EAAE;UACrBL,gBAAe,IAAK,YAAY,IAAI,CAACL,UAAU,CAACF,KAAK,CAACY,WAAW,CAAC,EAAE;QACtE;QACA,OAAOL,gBAAgB;MACzB;MACA,OAAO,qBAAqB;IAC9B;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAACxB,WAAW,CAAC,CAAC;EACpB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
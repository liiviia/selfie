{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  setup() {\n    const route = useRoute();\n    const events = ref([]);\n    const activities = ref([]);\n    const queryDate = computed(() => route.query.date);\n    const fetchEvents = async () => {\n      try {\n        const {\n          author,\n          date\n        } = route.query;\n        const token = sessionStorage.getItem('token');\n        console.log('Fetching events for:', author, date);\n        const response = await axios.get('/api/events/by-date', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author,\n            date\n          }\n        });\n        events.value = Array.isArray(response.data) ? response.data : [response.data];\n        console.log('Fetched events:', events.value);\n        const activityResponse = await axios.get('/api/activities/by-date', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author,\n            date\n          }\n        });\n        activities.value = Array.isArray(activityResponse.data) ? activityResponse.data : [activityResponse.data];\n        console.log('Fetched activities:', activities.value);\n        activities.value.forEach(activity => {\n          if (activity.deadline) {\n            const parsedDate = new Date(activity.deadline);\n            if (isNaN(parsedDate)) {\n              console.error('Data non valida per l\\'attività:', activity);\n            } else {\n              activity.date = parsedDate;\n            }\n          } else {\n            console.error('Attività senza data di scadenza:', activity);\n          }\n        });\n      } catch (error) {\n        console.error('Errore nel recupero degli eventi e delle attività:', error);\n      }\n    };\n    const formatDate = dateString => {\n      if (!dateString) return 'Data non disponibile';\n      const date = new Date(dateString);\n      return date instanceof Date && !isNaN(date) ? date.toLocaleDateString('it-IT', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      }) : 'Data non valida';\n    };\n    onMounted(fetchEvents);\n    return {\n      events,\n      activities,\n      formatDate,\n      queryDate\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","axios","setup","route","events","activities","queryDate","query","date","fetchEvents","author","token","sessionStorage","getItem","console","log","response","get","headers","Authorization","params","value","Array","isArray","data","activityResponse","forEach","activity","deadline","parsedDate","Date","isNaN","error","formatDate","dateString","toLocaleDateString","year","month","day"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/eventDayCalendar.vue"],"sourcesContent":["<template>\n    <div>\n      <h2>Eventi e Attività per {{ formatDate(queryDate) }}</h2>\n      <div v-if=\"events.length > 0\">\n        <h3>Eventi:</h3>\n        <div v-for=\"event in events\" :key=\"event._id\">\n          <h4>{{ event.title }}</h4>\n          <p>Data: {{ formatDate(event.date) }}</p>\n          <p>Descrizione: {{ event.description }}</p>\n        </div>\n      </div>\n      <div v-if=\"activities.length > 0\">\n        <h3>Attività:</h3>\n        <div v-for=\"activity in activities\" :key=\"activity._id\">\n          <h4>{{ activity.title }}</h4>\n          <p>Data: {{ formatDate(activity.deadline || activity.date) }}</p>\n          <p>Descrizione: {{ activity.description }}</p>\n        </div>\n      </div>\n      <div v-if=\"events.length === 0 && activities.length === 0\">\n        <p>Nessun evento o attività per questa data.</p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { ref, onMounted, computed } from 'vue';\n  import { useRoute } from 'vue-router';\n  import axios from 'axios';\n  \n  export default {\n    setup() {\n      const route = useRoute();\n      const events = ref([]);\n      const activities = ref([]);\n      const queryDate = computed(() => route.query.date);\n  \n      const fetchEvents = async () => {\n    try {\n      const { author, date } = route.query;\n      const token = sessionStorage.getItem('token');\n      console.log('Fetching events for:', author, date);\n      const response = await axios.get('/api/events/by-date', {\n        headers: { Authorization: `Bearer ${token}` },\n        params: { author, date }\n      });\n      events.value = Array.isArray(response.data) ? response.data : [response.data];\n      console.log('Fetched events:', events.value);\n  \n      const activityResponse = await axios.get('/api/activities/by-date', {\n        headers: { Authorization: `Bearer ${token}` },\n        params: { author, date }\n      });\n      activities.value = Array.isArray(activityResponse.data) ? activityResponse.data : [activityResponse.data];\n      console.log('Fetched activities:', activities.value);\n  \n      activities.value.forEach(activity => {\n        if (activity.deadline) {\n          const parsedDate = new Date(activity.deadline);\n          if (isNaN(parsedDate)) {\n            console.error('Data non valida per l\\'attività:', activity);\n          } else {\n            activity.date = parsedDate; \n          }\n        } else {\n          console.error('Attività senza data di scadenza:', activity);\n        }\n      });\n    } catch (error) {\n      console.error('Errore nel recupero degli eventi e delle attività:', error);\n    }\n  };\n  \n  const formatDate = (dateString) => {\n    if (!dateString) return 'Data non disponibile';\n    const date = new Date(dateString);\n    return date instanceof Date && !isNaN(date) \n      ? date.toLocaleDateString('it-IT', { \n          year: 'numeric', \n          month: 'long', \n          day: 'numeric' \n        }) \n      : 'Data non valida';\n  };\n  \n      onMounted(fetchEvents);\n  \n      return { events,activities, formatDate, queryDate };\n    }\n  }\n  </script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      timeMachineDate: '',\n      timeMachineTime: '',\n      simulatedTime: '--:--:--',\n      intervalId: null,\n      currentSimulatedTime: null,\n      showNotifications: false,\n      notifications: []\n    };\n  },\n  computed: {\n    currentPage() {\n      const routeNameMap = {\n        '/': 'Login',\n        '/homePrincipale': 'Home',\n        '/pomodoroTempo': 'Pomodoro',\n        '/todo': 'Lista Note',\n        '/calendarEvent': 'Calendario',\n        '/addEvent': 'Aggiungi Evento',\n        '/eventsE': 'Lista Eventi',\n        '/addActivities': 'Aggiungi Attività',\n        '/activities': 'Lista Attività',\n        '/pomSession': 'Sessioni Pomodoro',\n        '/accountUtente': 'Gestisci il tuo Account'\n      };\n      return routeNameMap[this.$route.path] || '';\n    },\n    showTimeMachine() {\n      const routesWithTimeMachine = ['/todo', '/calendarEvent', '/eventsE', '/activities', '/pomSession'];\n      return routesWithTimeMachine.includes(this.$route.path);\n    }\n  },\n  methods: {\n    setTimeMachine() {\n      if (this.timeMachineDate && this.timeMachineTime) {\n        const newDateTime = new Date(`${this.timeMachineDate}T${this.timeMachineTime}`);\n        this.currentSimulatedTime = newDateTime;\n        this.simulatedTime = this.currentSimulatedTime.toLocaleTimeString('it-IT', {\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        });\n        this.startTimeFlow();\n      }\n    },\n    resetTimeMachine() {\n      clearInterval(this.intervalId);\n      this.simulatedTime = '--:--:--';\n      this.currentSimulatedTime = null;\n    },\n    startTimeFlow() {\n      clearInterval(this.intervalId);\n      this.intervalId = setInterval(() => {\n        if (this.currentSimulatedTime) {\n          this.currentSimulatedTime.setSeconds(this.currentSimulatedTime.getSeconds() + 1);\n          this.simulatedTime = this.currentSimulatedTime.toLocaleTimeString('it-IT', {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit'\n          });\n        }\n      }, 1000);\n    },\n    logout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('username');\n      localStorage.clear();\n      sessionStorage.clear();\n      this.$router.push('/');\n    },\n    async toggleNotifications() {\n      // Mostra o nasconde il menu delle notifiche\n      this.showNotifications = !this.showNotifications;\n      if (this.showNotifications) {\n        await this.checkDeadlines();\n      }\n    },\n    async checkDeadlines() {\n      //notifiche con scadenza <= 2gg\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/2days', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        this.notifications = response.data; // Salva le notifiche nella variabile\n        console.log(this.notifications);\n        console.log(response.data);\n        //alert('Email inviata con successo!');\n      } catch (error) {\n        console.error('Errore nel recupero delle notifiche:', error);\n      }\n    },\n    async sendEmail() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.post('/api/activities/sendEmail', {\n          username: username\n        },\n        // Dati nel body della richiesta\n        {\n          headers: {\n            Authorization: `Bearer ${token}`\n          } // Headers separati\n        });\n        alert(response.data.message);\n      } catch (error) {\n        console.error('Errore nell invio dell email:', error);\n        alert('Errore durante invio email');\n      }\n    }\n    // mounted() {\n    //  this.checkDeadlines();\n    // }\n  }\n};","map":{"version":3,"names":["axios","data","username","localStorage","getItem","timeMachineDate","timeMachineTime","simulatedTime","intervalId","currentSimulatedTime","showNotifications","notifications","computed","currentPage","routeNameMap","$route","path","showTimeMachine","routesWithTimeMachine","includes","methods","setTimeMachine","newDateTime","Date","toLocaleTimeString","hour","minute","second","startTimeFlow","resetTimeMachine","clearInterval","setInterval","setSeconds","getSeconds","logout","removeItem","clear","sessionStorage","$router","push","toggleNotifications","checkDeadlines","token","response","get","headers","Authorization","params","console","log","error","sendEmail","post","alert","message"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/components/NavigationBar.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar bg-body-tertiary\">\n    <div class=\"container-fluid\">\n      <!-- Contenitore flessibile per sidebar e link Home -->\n      <div class=\"d-flex align-items-center\">\n        <!-- Button per aprire la sidebar -->\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasNavbar\"\n          aria-controls=\"offcanvasNavbar\">\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        \n      </div>\n\n        <!-- Time Machine Controls, mostra solo nelle pagine specificate -->\n        <div v-if=\"showTimeMachine\" class=\"time-machine-control d-none d-md-flex ms-3\">\n          <div>\n            <label for=\"date\">Data:</label>\n            <input type=\"date\" v-model=\"timeMachineDate\">\n            <label for=\"time\">Ora:</label>\n            <input type=\"time\" v-model=\"timeMachineTime\">\n            <button @click=\"setTimeMachine\">Imposta</button>\n            <button @click=\"resetTimeMachine\">Reset</button>\n          </div>\n          <div>\n            <p>Orologio: {{ simulatedTime }}</p>\n          </div>\n        </div>\n\n       <!-- Pulsanti Home e Gestione Profilo allineati a destra -->\n      <div class=\"d-flex ms-auto align-items-center\">\n        <!-- Pulsante Home -->\n        <a class=\"navbar-brand me-4\" href=\"/homePrincipale\">\n            <i class=\"fas fa-home\"></i>\n        </a>\n\n        <!-- Pulsante Gestione Profilo -->\n        <a class=\"me-4\" href=\"/accountUtente\">\n            <i class=\"fas fa-user\" style=\"color: black;\"></i>\n            <span class=\"username-initials\">{{ username }}</span>\n        </a>\n\n        <!-- Notifiche -->\n        <a class=\"me-4\" href=\"#\" @click=\"toggleNotifications\">\n          <i class=\"fas fa-bell\" style=\"color: black;\"></i> \n          <span v-if=\"notifications.length\" class=\"badge\">{{ notifications.length }}</span> \n        </a>\n\n        <div v-if=\"showNotifications\" class=\"notifications-dropdown\">\n          <ul>\n            <li v-for=\"notification in notifications\" :key=\"notification._id\">\n              titolo: {{ notification.title }} - Scadenza: {{ notification.deadline }}\n            </li>\n            <li v-if=\"notifications.length === 0\">\n              Nessuna notifica\n            </li>\n          </ul>\n          <button @click=\"sendEmail\" class=\"btn btn-primary\">Invia Email</button> \n        </div>        \n\n      </div>\n\n      <!-- Offcanvas Sidebar -->\n      <div class=\"offcanvas offcanvas-start\" tabindex=\"-1\" id=\"offcanvasNavbar\" aria-labelledby=\"offcanvasNavbarLabel\">\n        <div class=\"offcanvas-header\">\n          <h5 class=\"offcanvas-title\" id=\"offcanvasNavbarLabel\">Menu</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"offcanvas-body\">\n          <ul class=\"navbar-nav me-auto\">\n            <span class=\"nav-item username-text\">\n              Benvenuto, {{ username }}!\n            </span>\n            <li class=\"nav-item\"><a class=\"nav-link\" href=\"/todo\">Note</a></li>\n\n            <li class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"eventDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Eventi\n              </a>\n              <ul class=\"dropdown-menu\" aria-labelledby=\"eventDropdown\">\n                <li><a class=\"dropdown-item\" href=\"/addEvent\">Aggiungi evento</a></li>\n             <!--   <li><a class=\"dropdown-item\" href=\"/eventsE\">Lista eventi</a></li>-->\n              </ul>\n            </li>\n  \n            <li class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"activityDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Attività\n              </a>\n              <ul class=\"dropdown-menu\" aria-labelledby=\"activityDropdown\">\n                <li><a class=\"dropdown-item\" href=\"/addActivities\">Aggiungi attività</a></li>\n              <!--  <li><a class=\"dropdown-item\" href=\"/activities\">Lista attività</a></li> -->\n              </ul>\n            </li>\n  \n            <li class=\"nav-item\"><a class=\"nav-link\" href=\"/calendarEvent\">Calendario</a></li>\n            <li class=\"nav-item\"><a class=\"nav-link\" href=\"/pomodoroTempo\">Pomodoro</a></li>\n          <!--  <li class=\"nav-item\"><a class=\"nav-link\" href=\"/pomSession\">Sessioni Pomodoro</a></li>-->\n            <!-- <li class=\"nav-item\"><a class=\"nav-link\" href=\"/accountUtente\">Gestisci il tuo Account</a></li> --> \n          </ul>\n          <!-- Logout Button -->\n          <button type=\"button\" class=\"btn btn-dark mt-3\" @click=\"logout\">Logout</button>\n        </div>\n      </div>\n    </div>\n  </nav>\n</template>\n  \n<script>\n\nimport axios from 'axios';\n\n  export default {\n    data() {\n      return {\n        username: localStorage.getItem('username') || 'Guest',\n        timeMachineDate: '',  \n        timeMachineTime: '',  \n        simulatedTime: '--:--:--', \n        intervalId: null, \n        currentSimulatedTime: null,\n        showNotifications: false,\n        notifications: [] \n      };\n    }, \n    computed:{\n      currentPage() {\n        const routeNameMap = {\n          '/': 'Login', \n          '/homePrincipale': 'Home',\n          '/pomodoroTempo': 'Pomodoro',\n          '/todo': 'Lista Note',\n          '/calendarEvent': 'Calendario',\n          '/addEvent': 'Aggiungi Evento',\n          '/eventsE': 'Lista Eventi',\n          '/addActivities': 'Aggiungi Attività',\n          '/activities': 'Lista Attività',\n          '/pomSession': 'Sessioni Pomodoro',\n          '/accountUtente': 'Gestisci il tuo Account',\n        };\n        return routeNameMap[this.$route.path] || ''; \n      },\n      showTimeMachine() {\n        const routesWithTimeMachine = [\n          '/todo',              \n          '/calendarEvent',      \n          '/eventsE',         \n          '/activities',         \n          '/pomSession'          \n        ];\n        return routesWithTimeMachine.includes(this.$route.path);\n      }\n    },\n    methods:{\n      setTimeMachine() {\n        if (this.timeMachineDate && this.timeMachineTime) {\n          const newDateTime = new Date(`${this.timeMachineDate}T${this.timeMachineTime}`);\n          this.currentSimulatedTime = newDateTime;\n          this.simulatedTime = this.currentSimulatedTime.toLocaleTimeString('it-IT', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n          this.startTimeFlow();\n        }\n      },\n      resetTimeMachine() {\n        clearInterval(this.intervalId);\n        this.simulatedTime = '--:--:--'; \n        this.currentSimulatedTime = null;\n      },\n      startTimeFlow() {\n        clearInterval(this.intervalId);\n        this.intervalId = setInterval(() => {\n          if (this.currentSimulatedTime) {\n            this.currentSimulatedTime.setSeconds(this.currentSimulatedTime.getSeconds() + 1);\n            this.simulatedTime = this.currentSimulatedTime.toLocaleTimeString('it-IT', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n          }\n        }, 1000); \n      },\n\n\n      logout() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('username');\n        localStorage.clear();\n        sessionStorage.clear();\n        this.$router.push('/');\n      },\n\n\n      async toggleNotifications(){\n        // Mostra o nasconde il menu delle notifiche\n        this.showNotifications = !this.showNotifications;\n        if (this.showNotifications) {\n          await this.checkDeadlines();\n        }\n      },\n  \n\n      async checkDeadlines() {    //notifiche con scadenza <= 2gg\n        try {\n          const token = sessionStorage.getItem('token');\n          const username = localStorage.getItem('username');\n          const response = await axios.get('/api/activities/2days', {\n            headers: {Authorization: `Bearer ${token}`},\n            params:{username: username}\n          });\n          this.notifications = response.data; // Salva le notifiche nella variabile\n          console.log(this.notifications);\n          console.log(response.data);\n          //alert('Email inviata con successo!');\n        } catch (error) {\n          console.error('Errore nel recupero delle notifiche:', error);\n        } \n      },\n\n\n      async sendEmail() {\n        try {\n          const token = sessionStorage.getItem('token');\n          const username = localStorage.getItem('username');\n          const response = await axios.post('/api/activities/sendEmail', \n            { username: username },  // Dati nel body della richiesta\n            {headers: { Authorization: `Bearer ${token}` }  // Headers separati\n            }\n          );\n          alert(response.data.message); \n        } catch (error) {\n          console.error('Errore nell invio dell email:', error);\n          alert('Errore durante invio email');\n        }\n      }      \n      // mounted() {\n      //  this.checkDeadlines();\n      // }\n      \n    }\n    \n  };\n\n</script>\n\n<style scoped>\n.carousel-item {\n  background-color: #f0f0f0;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.carousel-control-prev-icon,\n.carousel-control-next-icon {\n  background-color: #000;\n  border-radius: 50%;\n}\n\n.navbar {\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);\n}\n\n.nav-link {\n  padding: 10px 15px;\n  transition: background-color 0.3s;\n}\n\n.nav-link:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n}\n\n.btn-danger {\n  margin-left: 10px;\n}\n\n\n.btn-danger:hover {\n  background-color: #c82333;\n  transition: background-color 0.3s;\n}\n\n.username-text{\n  color: #1100ff; \n  font-weight: bold;\n}\n\n\n.time-machine-control {\n  display: flex;\n  align-items: center;\n}\n\n.time-machine-control input {\n  margin-right: 10px;\n  padding: 5px;\n  border-radius: 8px; \n  border: 1px solid #ccc; \n  outline: none;\n}\n\n.time-machine-control button {\n  margin-right: 10px;\n  background-color: #007BFF;\n  color: white;\n  border: none;\n  padding: 8px 15px;\n  font-size: 0.9em;\n  border-radius: 10px;\n  cursor: pointer;\n}\n\n.time-machine-control button:hover {\n  background-color: #0056b3;\n}\n\n.notifications-dropdown {\n  position: absolute;\n  top: 50px; \n  right: 10px;\n  width: 200px;\n  background-color: white;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  padding: 10px;\n  z-index: 1000; \n}\n\n.notifications-dropdown ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.notifications-dropdown li {\n  padding: 8px 0;\n  border-bottom: 1px solid #eee;\n}\n\n.notifications-dropdown li:last-child {\n  border-bottom: none;\n}\n\n.notifications-dropdown button {\n  margin-top: 10px;\n  width: 100%; \n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
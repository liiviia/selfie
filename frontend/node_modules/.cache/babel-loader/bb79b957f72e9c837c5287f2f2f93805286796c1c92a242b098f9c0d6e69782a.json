{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport UserLogin from '../views/userLogin.vue';\nimport nuovoUtente from '../views/registratiAccedi.vue';\nimport HomePrincipale from '../views/HomePrincipale.vue';\nimport ToDoApp from '../views/ToDoApp.vue';\nimport activities from '../views/ActivitiesPage.vue';\nimport addActivities from '../views/addActivities.vue';\nimport addEvent from '../views/addEvent.vue';\nimport calendarEvent from '../views/calendarEvent.vue';\nimport eventsE from '../views/eventsE.vue';\nimport pomodoroTempo from '../views/pomodoroTempo.vue';\nimport pomSession from '../views/pomSession.vue';\nimport editNote from '../views/editNote.vue';\nimport accountUtente from '@/views/accountUtente.vue';\nconst routes = [{\n  path: '/',\n  name: 'userLogin',\n  component: UserLogin\n}, {\n  path: '/accountUtente',\n  name: 'accountUtente',\n  component: accountUtente,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/registra',\n  name: 'nuovoUtente',\n  component: nuovoUtente\n}, {\n  path: '/homePrincipale',\n  name: 'HomePrincipale',\n  component: HomePrincipale,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/todo',\n  name: 'ToDoApp',\n  component: ToDoApp,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/edit-note/:id',\n  name: 'editNote',\n  component: editNote,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/activities',\n  name: 'activities',\n  component: activities,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/addActivities',\n  name: 'addActivities',\n  component: addActivities,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/addEvent',\n  name: 'addEvent',\n  component: addEvent,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/calendarEvent',\n  name: 'calendarEvent',\n  component: calendarEvent,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/eventsE',\n  name: 'eventsE',\n  component: eventsE,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/pomodoroTempo',\n  name: 'pomodoroTempo',\n  component: pomodoroTempo,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/pomSession',\n  name: 'pomSession',\n  component: pomSession,\n  meta: {\n    requiresAuth: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\n// Guard globale per controllare il token\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem('token'); // Recupera il token dal sessionStorage\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // Se la rotta richiede autenticazione e il token non è presente, reindirizza al login\n    if (!token) {\n      next({\n        path: '/',\n        query: {\n          redirect: to.fullPath\n        } // Dopo il login, reindirizza alla pagina richiesta\n      });\n    } else {\n      next(); // Se il token è presente, consenti l'accesso alla rotta\n    }\n  } else {\n    next(); // Se la rotta non richiede autenticazione, consenti l'accesso\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","UserLogin","nuovoUtente","HomePrincipale","ToDoApp","activities","addActivities","addEvent","calendarEvent","eventsE","pomodoroTempo","pomSession","editNote","accountUtente","routes","path","name","component","meta","requiresAuth","router","history","beforeEach","to","from","next","token","sessionStorage","getItem","matched","some","record","query","redirect","fullPath"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport UserLogin from '../views/userLogin.vue'; \nimport nuovoUtente from '../views/registratiAccedi.vue'\nimport HomePrincipale from '../views/HomePrincipale.vue';\nimport ToDoApp from '../views/ToDoApp.vue'; \nimport activities from '../views/ActivitiesPage.vue'\nimport addActivities from '../views/addActivities.vue'\nimport addEvent from '../views/addEvent.vue'\nimport calendarEvent from '../views/calendarEvent.vue'\nimport eventsE from '../views/eventsE.vue'\nimport pomodoroTempo from '../views/pomodoroTempo.vue'\nimport pomSession from '../views/pomSession.vue'\nimport editNote from '../views/editNote.vue';\nimport accountUtente from '@/views/accountUtente.vue';\n\n\nconst routes = [\n  {\n    path: '/',\n    name: 'userLogin',\n    component: UserLogin,\n  },\n\n  {\n    path: '/accountUtente',\n    name: 'accountUtente',\n    component: accountUtente,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/registra',\n    name: 'nuovoUtente',\n    component: nuovoUtente,\n  },\n\n  {\n    path: '/homePrincipale',\n    name: 'HomePrincipale',\n    component: HomePrincipale ,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/todo',\n    name: 'ToDoApp',\n    component: ToDoApp,\n    meta: { requiresAuth: true } \n\n  },\n\n  {\n    path: '/edit-note/:id',\n    name: 'editNote',\n    component: editNote,\n    meta: { requiresAuth: true } \n  },\n\n\n  {\n    path: '/activities',\n    name: 'activities',\n    component: activities,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/addActivities',\n    name: 'addActivities',\n    component: addActivities,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/addEvent',\n    name: 'addEvent',\n    component: addEvent,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/calendarEvent',\n    name: 'calendarEvent',\n    component: calendarEvent,\n    meta: { requiresAuth: true } \n  },\n\n\n  {\n    path: '/eventsE',\n    name: 'eventsE',\n    component: eventsE,\n    meta: { requiresAuth: true } \n  },\n\n\n  {\n    path: '/pomodoroTempo',\n    name: 'pomodoroTempo',\n    component: pomodoroTempo,\n    meta: { requiresAuth: true } \n  },\n\n  {\n    path: '/pomSession',\n    name: 'pomSession',\n    component: pomSession,\n    meta: { requiresAuth: true } \n  },\n\n\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\n\n// Guard globale per controllare il token\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem('token'); // Recupera il token dal sessionStorage\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // Se la rotta richiede autenticazione e il token non è presente, reindirizza al login\n    if (!token) {\n      next({\n        path: '/',\n        query: { redirect: to.fullPath } // Dopo il login, reindirizza alla pagina richiesta\n      });\n    } else {\n      next(); // Se il token è presente, consenti l'accesso alla rotta\n    }\n  } else {\n    next(); // Se la rotta non richiede autenticazione, consenti l'accesso\n  }\n});\n\n\n\n\n\nexport default router;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
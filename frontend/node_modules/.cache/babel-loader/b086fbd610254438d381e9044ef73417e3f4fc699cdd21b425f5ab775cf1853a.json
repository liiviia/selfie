{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"event-form\"\n};\nconst _hoisted_2 = {\n  id: \"studio-pausa\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h1\", null, \"Sessione Pomodoro\", -1)), _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $setup.aggiungiPomodoro && $setup.aggiungiPomodoro(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"tempoStudio\"\n  }, \"Tempo di studio (minuti):\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.newPom.tempoStudio = $event),\n    min: \"1\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $setup.newPom.tempoStudio]])]), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"tempoPausa\"\n  }, \"Tempo di pausa (minuti):\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newPom.tempoPausa = $event),\n    min: \"1\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $setup.newPom.tempoPausa]])]), _createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"ripetizioni\"\n  }, \"Numero di ripetizioni:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.newPom.ripetizioni = $event),\n    min: \"1\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $setup.newPom.ripetizioni]])]), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"giorno\"\n  }, \"Giorno della sessione:\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.newPom.giorno = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $setup.newPom.giorno]])]), _cache[9] || (_cache[9] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Aggiungi Sessione\", -1))], 32), _createElementVNode(\"p\", _hoisted_2, _toDisplayString($setup.statusMessage), 1), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    id: \"clock\",\n    class: \"blob\"\n  }, [_createElementVNode(\"div\", {\n    class: \"timer\",\n    id: \"timerDisplay\"\n  }, \"00:00\"), _createElementVNode(\"div\", {\n    class: \"progress-bar\"\n  })], -1))]);\n}","map":{"version":3,"names":["class","id","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$setup","aggiungiPomodoro","for","type","$event","newPom","tempoStudio","min","required","tempoPausa","ripetizioni","giorno","_hoisted_2","_toDisplayString","statusMessage"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/pomodoroTempo.vue"],"sourcesContent":["<template>\n  <div class=\"event-form\">\n    <h1>Sessione Pomodoro</h1>\n    <form @submit.prevent=\"aggiungiPomodoro\">\n      <div>\n        <label for=\"tempoStudio\">Tempo di studio (minuti):</label>\n        <input type=\"number\" v-model=\"newPom.tempoStudio\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"tempoPausa\">Tempo di pausa (minuti):</label>\n        <input type=\"number\" v-model=\"newPom.tempoPausa\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"ripetizioni\">Numero di ripetizioni:</label>\n        <input type=\"number\" v-model=\"newPom.ripetizioni\" min=\"1\" required>\n      </div>\n\n      <div>\n        <label for=\"giorno\">Giorno della sessione:</label>\n        <input type=\"date\" v-model=\"newPom.giorno\" required>\n      </div>\n\n      <button type=\"submit\">Aggiungi Sessione</button>\n    </form>\n\n    <p id=\"studio-pausa\">{{ statusMessage }}</p>\n\n    <div id=\"clock\" class=\"blob\">\n      <div class=\"timer\" id=\"timerDisplay\">00:00</div>\n      <div class=\"progress-bar\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\n\nexport default {\n  setup() {\n    const route = useRoute();\n\n    const newPom = ref({\n      username: localStorage.getItem('username') || 'Guest',\n      tempoStudio: '',\n      tempoPausa: '',\n      ripetizioni: '',\n      giorno: ''\n    });\n    const statusMessage = ref('');\n\n    onMounted(() => {\n      if (route.query.date) {\n        newPom.value.giorno = route.query.date;\n      }\n    });\n\n    const aggiungiPomodoro = async () => {\n      try {\n        const token = sessionStorage.getItem('token');\n\n        const response = await axios.post('/api/pomsPOST', newPom.value, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Sessione pomodoro aggiunta:', response.data);\n        newPom.value = {\n          username: newPom.value.username,\n          tempoStudio: '',\n          tempoPausa: '',\n          ripetizioni: '',\n          giorno: ''\n        };\n\n        startStudyTimer(parseInt(response.data.tempoStudio), parseInt(response.data.ripetizioni), parseInt(response.data.tempoPausa));\n      } catch (error) {\n        console.error('Errore:', error);\n      }\n    };\n\n    const startStudyTimer = (studyTime, studyCycles, pause) => {\n      statusMessage.value = `Studio! Numero cicli rimanenti: ${studyCycles}`;\n      const progressBar = document.querySelector('.progress-bar');\n      progressBar.style.width = '0%';\n\n      let remainingTime = studyTime * 60; // convert study time to seconds\n\n      const updateTimer = () => {\n        if (remainingTime > 0) {\n          const minutes = Math.floor(remainingTime / 60);\n          const seconds = remainingTime % 60;\n          document.getElementById('timerDisplay').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n          remainingTime--;\n\n          const progressPercentage = ((studyTime * 60 - remainingTime) / (studyTime * 60)) * 100;\n          progressBar.style.width = `${progressPercentage}%`;\n          setTimeout(updateTimer, 1000);\n        } else {\n          progressBar.style.width = '0%';\n          startBreakTimer(pause, studyCycles);\n        }\n      };\n\n      updateTimer();\n    };\n\n    const startBreakTimer = (pause, studyCycles) => {\n      statusMessage.value = `Pausa! Numero cicli rimanenti: ${studyCycles}`;\n      const progressBar = document.querySelector('.progress-bar');\n      progressBar.style.width = '0%';\n\n      let remainingTime = pause * 60; // convert pause time to seconds\n\n      const updateTimer = () => {\n        if (remainingTime > 0) {\n          const minutes = Math.floor(remainingTime / 60);\n          const seconds = remainingTime % 60;\n          document.getElementById('timerDisplay').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n          remainingTime--;\n\n          const progressPercentage = ((pause * 60 - remainingTime) / (pause * 60)) * 100;\n          progressBar.style.width = `${progressPercentage}%`;\n          setTimeout(updateTimer, 1000);\n        } else {\n          progressBar.style.width = '0%';\n          studyCycles--;\n          if (studyCycles > 0) {\n            startStudyTimer(newPom.value.tempoStudio, studyCycles, pause);\n          } else {\n            statusMessage.value = `Finito! Cicli rimanenti: ${studyCycles}`;\n            document.getElementById('timerDisplay').textContent = \"00:00\";\n          }\n        }\n      };\n\n      updateTimer();\n    };\n\n    return {\n      newPom,\n      statusMessage,\n      aggiungiPomodoro\n    };\n  }\n};\n</script>\n\n<style scoped>\n#clock {\n  margin-top: 20px;\n}\n\n.progress-bar {\n  width: 0;\n  height: 20px;\n  background-color: green;\n  transition: width 1s linear;\n}\n\n.timer {\n  font-size: 2em;\n  text-align: center;\n  margin-bottom: 10px;\n}\n\nform {\n  max-width: 400px;\n  margin: auto;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n}\n\nbutton {\n  padding: 10px 20px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAY;;EA0BlBC,EAAE,EAAC;AAAc;;uBA1BtBC,mBAAA,CAgCM,OAhCNC,UAgCM,G,4BA/BJC,mBAAA,CAA0B,YAAtB,mBAAiB,QACrBA,mBAAA,CAsBO;IAtBAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHjBC,cAAA,KAAAC,IAAA,KAG2BC,MAAA,CAAAC,gBAAA,IAAAD,MAAA,CAAAC,gBAAA,IAAAF,IAAA,CAAgB;MACrCJ,mBAAA,CAGM,c,0BAFJA,mBAAA,CAA0D;IAAnDO,GAAG,EAAC;EAAa,GAAC,2BAAyB,Q,gBAClDP,mBAAA,CAAmE;IAA5DQ,IAAI,EAAC,QAAQ;IAN5B,uBAAAN,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAMsCJ,MAAA,CAAAK,MAAM,CAACC,WAAW,GAAAF,MAAA;IAAEG,GAAG,EAAC,GAAG;IAACC,QAAQ,EAAR;gCAA5BR,MAAA,CAAAK,MAAM,CAACC,WAAW,E,KAGlDX,mBAAA,CAGM,c,0BAFJA,mBAAA,CAAwD;IAAjDO,GAAG,EAAC;EAAY,GAAC,0BAAwB,Q,gBAChDP,mBAAA,CAAkE;IAA3DQ,IAAI,EAAC,QAAQ;IAX5B,uBAAAN,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAWsCJ,MAAA,CAAAK,MAAM,CAACI,UAAU,GAAAL,MAAA;IAAEG,GAAG,EAAC,GAAG;IAACC,QAAQ,EAAR;gCAA3BR,MAAA,CAAAK,MAAM,CAACI,UAAU,E,KAGjDd,mBAAA,CAGM,c,0BAFJA,mBAAA,CAAuD;IAAhDO,GAAG,EAAC;EAAa,GAAC,wBAAsB,Q,gBAC/CP,mBAAA,CAAmE;IAA5DQ,IAAI,EAAC,QAAQ;IAhB5B,uBAAAN,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAgBsCJ,MAAA,CAAAK,MAAM,CAACK,WAAW,GAAAN,MAAA;IAAEG,GAAG,EAAC,GAAG;IAACC,QAAQ,EAAR;gCAA5BR,MAAA,CAAAK,MAAM,CAACK,WAAW,E,KAGlDf,mBAAA,CAGM,c,0BAFJA,mBAAA,CAAkD;IAA3CO,GAAG,EAAC;EAAQ,GAAC,wBAAsB,Q,gBAC1CP,mBAAA,CAAoD;IAA7CQ,IAAI,EAAC,MAAM;IArB1B,uBAAAN,MAAA,QAAAA,MAAA,MAAAO,MAAA,IAqBoCJ,MAAA,CAAAK,MAAM,CAACM,MAAM,GAAAP,MAAA;IAAEI,QAAQ,EAAR;gCAAfR,MAAA,CAAAK,MAAM,CAACM,MAAM,E,+BAG3ChB,mBAAA,CAAgD;IAAxCQ,IAAI,EAAC;EAAQ,GAAC,mBAAiB,O,OAGzCR,mBAAA,CAA4C,KAA5CiB,UAA4C,EAAAC,gBAAA,CAApBb,MAAA,CAAAc,aAAa,O,4BAErCnB,mBAAA,CAGM;IAHDH,EAAE,EAAC,OAAO;IAACD,KAAK,EAAC;MACpBI,mBAAA,CAAgD;IAA3CJ,KAAK,EAAC,OAAO;IAACC,EAAE,EAAC;KAAe,OAAK,GAC1CG,mBAAA,CAAgC;IAA3BJ,KAAK,EAAC;EAAc,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
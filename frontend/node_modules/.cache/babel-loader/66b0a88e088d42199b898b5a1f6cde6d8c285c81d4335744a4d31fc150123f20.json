{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* import NavigationBar from '../components/NavigationBar.vue';\n */\nimport axios from 'axios';\nexport default {\n  name: 'HomePrincipale',\n  /* components: {\n    NavigationBar,\n  }, */\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      lastEventTitle: '',\n      lastEventDescription: '',\n      lastEventDate: '',\n      lastActivityTitle: '',\n      lastActivityDescription: '',\n      lastActivityDeadline: '',\n      noEventsMessage: '',\n      noActivitiesMessage: '',\n      notifications: [],\n      noNotificationsMessage: ''\n    };\n  },\n  mounted() {\n    this.getLastEvent();\n    this.getLastActivity();\n    this.getNotifies();\n  },\n  methods: {\n    async getLastEvent() {\n      try {\n        const token = sessionStorage.getItem('token');\n        console.log(\"token home \", token);\n        const response = await axios.get('/api/events/last', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author: this.username\n          }\n        });\n        if (response.data) {\n          this.lastEventTitle = response.data.title || 'Nessun evento';\n          this.lastEventDescription = response.data.description || 'Nessuna descrizione';\n          this.lastEventDate = response.data.date || 'Nessuna data';\n        } else {\n          this.noEventsMessage = 'Nessun evento trovato.';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero dell\\'ultimo evento:', error);\n        this.noEventsMessage = 'Errore nel caricamento dell\\'ultimo evento.';\n      }\n    },\n    logout() {\n      localStorage.clear();\n      this.$router.push('/');\n    },\n    async getLastActivity() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/last', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            username: username\n          }\n        });\n        if (response.data) {\n          this.lastActivityTitle = response.data.title;\n          this.lastActivityDescription = response.data.description;\n          this.lastActivityDeadline = new Date(response.data.deadline).toLocaleDateString();\n          this.noActivitiesMessage = '';\n        } else {\n          this.noActivitiesMessage = 'Non ci sono attività imminenti';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero delle attività:', error);\n      }\n    },\n    async getNotifies() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.get('/api/notifications/getNotif', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            author: this.username\n          }\n        });\n        console.log(response.data);\n        if (response.data) {\n          this.notifications = response.data;\n        } else {\n          this.noNotificationsMessage = 'Nessuna notifica trovata.';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero delle notifiche :', error);\n        this.noNotificationsMessage = 'Errore caricamento delle notifiche.';\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","username","localStorage","getItem","lastEventTitle","lastEventDescription","lastEventDate","lastActivityTitle","lastActivityDescription","lastActivityDeadline","noEventsMessage","noActivitiesMessage","notifications","noNotificationsMessage","mounted","getLastEvent","getLastActivity","getNotifies","methods","token","sessionStorage","console","log","response","get","headers","Authorization","params","author","title","description","date","error","logout","clear","$router","push","Date","deadline","toLocaleDateString"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/HomePrincipale.vue"],"sourcesContent":["<template>\n\n  <div class=\"home-principale\">\n    <div class=\"container mt-3\">\n      <div class=\"row\">\n        <div class=\"col-md-6 d-flex justify-content-center align-items-center\">\n          <img class=\"img-fluid mt-3\" src=\"https://images.hdqwalls.com/wallpapers/abstract-shapes-4k-q2.jpg\"\n            alt=\"Immagine Home\" style=\"max-width: 80%; height: auto;\">\n        </div>\n\n        <div class=\"col-md-6\">\n          <div id=\"carouselExampleIndicators\" class=\"carousel slide mt-4\" data-bs-ride=\"carousel\">\n            <div class=\"carousel-indicators\">\n              <button type=\"button\" data-bs-target=\"#carouselExampleIndicators\" data-bs-slide-to=\"0\" class=\"active\"\n                aria-current=\"true\" aria-label=\"Slide 1\"></button>\n              <button type=\"button\" data-bs-target=\"#carouselExampleIndicators\" data-bs-slide-to=\"1\"\n                aria-label=\"Slide 2\"></button>\n            </div>\n            <div class=\"carousel-inner\">\n              <div class=\"carousel-item active\">\n                <div class=\"d-block w-100 text-center p-4\">\n                  <h2>Ultimo Evento</h2>\n                  <p v-if=\"noEventsMessage\">{{ noEventsMessage }}</p>\n                  <p v-else>\n                    <strong>Titolo:</strong> {{ lastEventTitle }}<br>\n                    <strong>Descrizione:</strong> {{ lastEventDescription }}<br>\n                    <strong>Data:</strong> {{ lastEventDate }}\n                  </p>\n                </div>\n              </div>\n\n              <div class=\"carousel-item\">\n                <div class=\"d-block w-100 text-center p-4\">\n                  <h2>Ultima Attività</h2>\n                  <p v-if=\"noActivitiesMessage\">{{ noActivitiesMessage }}</p>\n                  <p v-else>\n                    <strong>Titolo:</strong> {{ lastActivityTitle }}<br>\n                    <strong>Descrizione:</strong> {{ lastActivityDescription }}<br>\n                    <strong>Scadenza:</strong> {{ lastActivityDeadline }}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#carouselExampleIndicators\"\n              data-bs-slide=\"prev\">\n              <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n              <span class=\"visually-hidden\">Previous</span>\n            </button>\n\n            <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#carouselExampleIndicators\"\n              data-bs-slide=\"next\">\n              <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n              <span class=\"visually-hidden\">Next</span>\n            </button>\n\n\n\n          </div>\n\n\n          <div id=\"carouselNotifications\" class=\"carousel slide mt-4\" data-bs-ride=\"carousel\">\n            <div class=\"carousel-indicators\">\n              <button v-for=\"(notification, index) in notifications\" :key=\"index\" type=\"button\" \n                      :data-bs-target=\"'#carouselNotifications'\" :data-bs-slide-to=\"index\" \n                      :class=\"{ active: index === 0 }\" :aria-current=\"index === 0 ? 'true' : 'false'\"\n                      :aria-label=\"'Slide ' + (index + 1)\">\n              </button>\n            </div>\n          \n            <div class=\"carousel-inner\">\n              <div v-if=\"notifications.length === 0\" class=\"carousel-item active\">\n                <div class=\"d-block w-100 text-center p-4\">\n                  <h2>Nessuna Notifica</h2>\n                  <p>{{ noNotificationsMessage }}</p>\n                </div>\n              </div>\n          \n              <div v-else v-for=\"(notification, index) in notifications\" :key=\"index\" \n                   :class=\"['carousel-item', { active: index === 0 }]\">\n                <div class=\"d-block w-100 text-center p-4\">\n                  <h2>Notifica {{ index + 1 }}</h2>\n                  <p>\n                    <strong>Messaggio:</strong> {{ notification.message }}<br>\n                    <strong>Data:</strong> {{ new Date(notification.createdAt).toLocaleDateString() }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          \n            <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#carouselNotifications\"\n              data-bs-slide=\"prev\">\n              <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n              <span class=\"visually-hidden\">Previous</span>\n            </button>\n          \n            <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#carouselNotifications\"\n              data-bs-slide=\"next\">\n              <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n              <span class=\"visually-hidden\">Next</span>\n            </button>\n          </div>\n          \n          \n\n          \n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n/* import NavigationBar from '../components/NavigationBar.vue';\n */\nimport axios from 'axios';\n\nexport default {\n  name: 'HomePrincipale',\n  /* components: {\n    NavigationBar,\n  }, */\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      lastEventTitle: '',\n      lastEventDescription: '',\n      lastEventDate: '',\n      lastActivityTitle: '',\n      lastActivityDescription: '',\n      lastActivityDeadline: '',\n      noEventsMessage: '',\n      noActivitiesMessage: '',\n\n      notifications: [],\n      noNotificationsMessage:''\n    };\n  },\n  mounted() {\n    this.getLastEvent();\n    this.getLastActivity();\n    this.getNotifies();\n  },\n  methods: {\n    async getLastEvent() {\n      try {\n        const token = sessionStorage.getItem('token');\n        console.log(\"token home \", token);\n        const response = await axios.get('/api/events/last', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { author: this.username }\n        });\n        if (response.data) {\n          this.lastEventTitle = response.data.title || 'Nessun evento';\n          this.lastEventDescription = response.data.description || 'Nessuna descrizione';\n          this.lastEventDate = response.data.date || 'Nessuna data';\n        } else {\n          this.noEventsMessage = 'Nessun evento trovato.';\n        }\n      } catch (error) {\n        console.error('Errore nel recupero dell\\'ultimo evento:', error);\n        this.noEventsMessage = 'Errore nel caricamento dell\\'ultimo evento.';\n      }\n    },\n\n    logout() {\n      localStorage.clear();\n      this.$router.push('/');\n    },\n\n\n    async getLastActivity() {\n      try {\n        const token = sessionStorage.getItem('token');\n        const username = localStorage.getItem('username');\n        const response = await axios.get('/api/activities/last', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { username: username }\n        });\n\n        if (response.data) {\n          this.lastActivityTitle = response.data.title;\n          this.lastActivityDescription = response.data.description;\n          this.lastActivityDeadline = new Date(response.data.deadline).toLocaleDateString();\n          this.noActivitiesMessage = '';\n        } else {\n          this.noActivitiesMessage = 'Non ci sono attività imminenti';\n        }\n\n      } catch (error) {\n        console.error('Errore nel recupero delle attività:', error);\n      }\n    },\n\n    async getNotifies(){\n      try {\n        const token = sessionStorage.getItem('token');\n        const response = await axios.get('/api/notifications/getNotif', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: { author: this.username }\n        });\n        console.log(response.data);\n        if (response.data) {\n          this.notifications=response.data;\n        } else {\n          this.noNotificationsMessage = 'Nessuna notifica trovata.';        }\n      } catch (error) {\n        console.error('Errore nel recupero delle notifiche :', error);\n        this.noNotificationsMessage = 'Errore caricamento delle notifiche.';\n      }\n    }\n  }\n\n};\n</script>\n\n<style scoped>\nbody {\n  background: linear-gradient(to bottom, #0000ff, #ffffff);\n  margin: 0;\n}\n\n.home-principale {\n  text-align: center;\n}\n\n.carousel-item {\n  background-color: #f0f0f0;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.carousel-control-prev-icon,\n.carousel-control-next-icon {\n  background-color: #000;\n  border-radius: 50%;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
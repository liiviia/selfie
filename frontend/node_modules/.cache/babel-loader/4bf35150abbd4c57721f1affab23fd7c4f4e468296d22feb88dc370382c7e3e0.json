{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"account-utente\"\n};\nconst _hoisted_2 = {\n  class: \"personal-data\"\n};\nconst _hoisted_3 = {\n  class: \"manage-password\"\n};\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"teext\"\n  }, [_createElementVNode(\"h1\", null, \"Pagina Account Utente\")], -1)), _createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Dati Personali\", -1)), _createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Username:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.username), 1)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Email:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.email), 1)])]), _createElementVNode(\"div\", _hoisted_3, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", null, \"Gestisci Password\", -1)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.updatePassword && $options.updatePassword(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"currentPassword\",\n    class: \"form-label\"\n  }, \"Password Attuale\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"currentPassword\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.currentPassword = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.currentPassword]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"newPassword\",\n    class: \"form-label\"\n  }, \"Nuova Password\", -1)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"newPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newPassword = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.newPassword]])]), _cache[8] || (_cache[8] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Aggiorna Password\", -1))], 32)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createTextVNode","_toDisplayString","$data","username","email","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","updatePassword","_hoisted_4","for","type","id","$event","currentPassword","required","_hoisted_5","newPassword"],"sources":["/home/massi1/Documenti/uni/tecWEB/progettoClone/progettoTWvue/frontend/src/views/accountUtente.vue"],"sourcesContent":["<template>\n  <div class=\"account-utente\">\n    <div class=\"teext\">\n      <h1>Pagina Account Utente</h1>\n    </div>\n    \n    <div class=\"personal-data\">\n      <h2>Dati Personali</h2>\n      <p><strong>Username:</strong> {{ username }}</p>\n      <p><strong>Email:</strong> {{ email }}</p>\n    </div>\n\n    <div class=\"manage-password\">\n      <h2>Gestisci Password</h2>\n      <form @submit.prevent=\"updatePassword\">\n        <div class=\"mb-3\">\n          <label for=\"currentPassword\" class=\"form-label\">Password Attuale</label>\n          <input type=\"password\" class=\"form-control\" id=\"currentPassword\" v-model=\"currentPassword\" required>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"newPassword\" class=\"form-label\">Nuova Password</label>\n          <input type=\"password\" class=\"form-control\" id=\"newPassword\" v-model=\"newPassword\" required>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">Aggiorna Password</button>\n      </form>\n    </div>\n\n <!--   <div class=\"delete-account\">\n      <h2>Elimina Account</h2>\n      <button class=\"btn btn-danger\" @click=\"confirmDeleteAccount\">Elimina Account</button>\n    </div> -->\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AccountUtente',\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      email: localStorage.getItem('email') || '', \n      currentPassword: '',\n      newPassword: '',\n      errorMessage: '',\n      successMessage: ''\n    };\n  },\n  methods: {\n    async updatePassword() {\n  try {\n    const token = sessionStorage.getItem('token');\n    const response = await axios.put('/api/updatePassword', {\n      username: this.username,\n      currentPassword: this.currentPassword,\n      newPassword: this.newPassword\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}` \n      }\n    });\n\n    this.successMessage = response.data.message || 'Password aggiornata con successo!';\n    this.errorMessage = '';\n\n    this.currentPassword = '';\n    this.newPassword = '';\n    this.$router.push('/'); \n  } catch (error) {\n    this.errorMessage = error.response?.data?.message || 'Errore durante l\\'aggiornamento della password.';\n    console.log(\"errore\", error);\n    this.successMessage = '';\n  }\n},\n\n  \n  }\n};\n</script>\n\n<style scoped>\n.account-utente {\n  text-align: center;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.personal-data,\n.manage-password,\n.delete-account {\n  margin: 20px 0;\n  padding: 15px;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n}\n\n.error {\n  color: red;\n}\n\n.success {\n  color: green;\n}\n\n.teext {\n  margin: 10px 0;\n}\n</style>\n\n\n\n\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;EAKpBA,KAAK,EAAC;AAAe;;EAMrBA,KAAK,EAAC;AAAiB;;EAGnBA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;uBAlBvBC,mBAAA,CA8BM,OA9BNC,UA8BM,G,4BA7BJC,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAO,IAChBG,mBAAA,CAA8B,YAA1B,uBAAqB,E,QAG3BA,mBAAA,CAIM,OAJNC,UAIM,G,0BAHJD,mBAAA,CAAuB,YAAnB,gBAAc,QAClBA,mBAAA,CAAgD,Y,0BAA7CA,mBAAA,CAA0B,gBAAlB,WAAS,QAR1BE,gBAAA,CAQmC,GAAC,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,M,GACzCL,mBAAA,CAA0C,Y,0BAAvCA,mBAAA,CAAuB,gBAAf,QAAM,QATvBE,gBAAA,CASgC,GAAC,GAAAC,gBAAA,CAAGC,KAAA,CAAAE,KAAK,M,KAGrCN,mBAAA,CAaM,OAbNO,UAaM,G,0BAZJP,mBAAA,CAA0B,YAAtB,mBAAiB,QACrBA,mBAAA,CAUO;IAVAQ,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAdnBC,cAAA,KAAAC,IAAA,KAc6BC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;MACnCX,mBAAA,CAGM,OAHNc,UAGM,G,0BAFJd,mBAAA,CAAwE;IAAjEe,GAAG,EAAC,iBAAiB;IAAClB,KAAK,EAAC;KAAa,kBAAgB,Q,gBAChEG,mBAAA,CAAoG;IAA7FgB,IAAI,EAAC,UAAU;IAACnB,KAAK,EAAC,cAAc;IAACoB,EAAE,EAAC,iBAAiB;IAjB1E,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAiBoFd,KAAA,CAAAe,eAAe,GAAAD,MAAA;IAAEE,QAAQ,EAAR;gCAAjBhB,KAAA,CAAAe,eAAe,E,KAE3FnB,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFJrB,mBAAA,CAAkE;IAA3De,GAAG,EAAC,aAAa;IAAClB,KAAK,EAAC;KAAa,gBAAc,Q,gBAC1DG,mBAAA,CAA4F;IAArFgB,IAAI,EAAC,UAAU;IAACnB,KAAK,EAAC,cAAc;IAACoB,EAAE,EAAC,aAAa;IArBtE,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAqBgFd,KAAA,CAAAkB,WAAW,GAAAJ,MAAA;IAAEE,QAAQ,EAAR;gCAAbhB,KAAA,CAAAkB,WAAW,E,+BAEnFtB,mBAAA,CAAwE;IAAhEgB,IAAI,EAAC,QAAQ;IAACnB,KAAK,EAAC;KAAkB,mBAAiB,O","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}